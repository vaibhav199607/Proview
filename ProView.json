[{"id":"db102253.019a2","type":"tab","label":"Timetable","disabled":false,"info":""},{"id":"cb5e94b6.8304e8","type":"tab","label":"Location Scanning","disabled":false,"info":""},{"id":"89b2c70b.5de378","type":"tab","label":"Application UI ","disabled":false,"info":""},{"id":"97dcea88.f529e8","type":"tab","label":"Admin Panel","disabled":false,"info":""},{"id":"2e3c4299.0d122e","type":"tab","label":"Attendance UI","disabled":false,"info":""},{"id":"133fc443.48d31c","type":"tab","label":"Application Data","disabled":false,"info":""},{"id":"eaccbe40.a5df5","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"5579c0a7.6f2f3","type":"tab","label":"Flow 2","disabled":false,"info":""},{"id":"fa28c570.7a51b8","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"9b95398.c813ec8","type":"tab","label":"Flow 3","disabled":false,"info":""},{"id":"aae03965.769f28","type":"tab","label":"Flow 2","disabled":false,"info":""},{"id":"9d8eb838.7749b8","type":"subflow","name":"Persistence Helper","info":"","in":[{"x":45.5,"y":85,"wires":[{"id":"9dd13068.85a18"}]}],"out":[{"x":749.5,"y":53,"wires":[{"id":"5339953c.ed085c","port":0}]},{"x":755,"y":169,"wires":[{"id":"8a531437.d66248","port":0}]}]},{"id":"cd8881e0.b358d","type":"meraki-dashboard-api-service","z":"","host":"https://api.meraki.com/api/v0","secureApiKeyHeaderOrQueryName":"X-Cisco-Meraki-API-Key","name":"Pro Net"},{"id":"52258174.c9c2c","type":"MySQLdatabase","z":"","host":"127.0.0.1","port":"3306","db":"Meraki","tz":""},{"id":"96e77d00.5a502","type":"MySQLdatabase","z":"","host":"127.0.0.1","port":"3306","db":"test","tz":""},{"id":"46686bd8.b5b6f4","type":"sqlitedb","z":"","db":"test","mode":"RWC"},{"id":"89c1ff6.e03b5","type":"meraki-dashboard-api-service","z":"","host":"https://api.meraki.com/api/v0","secureApiKeyHeaderOrQueryName":"X-Cisco-Meraki-API-Key","name":"Proact Meraki"},{"id":"16e793ae.c5f03c","type":"Webex Teams Authentication","z":"","name":"Rajesh Kumar"},{"id":"9c2efa4e.07df68","type":"ui_tab","z":"","name":"Application","icon":"dashboard","order":2,"disabled":false,"hidden":false},{"id":"798523f0.94d9bc","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#ff0000","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#e5ede0","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","reset":false},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":true},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"ProView","hideToolbar":"false","allowSwipe":"false","lockMenu":"true","allowTempTheme":"false","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":0,"cx":0,"cy":6,"px":0,"py":0}}},{"id":"ce7fb7d6.d66c98","type":"ui_group","z":"","name":"Default","tab":"","disp":true,"width":"6","collapse":false},{"id":"f146207f.db419","type":"mui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"m-base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"m-page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"m-page-backgroundColor":{"value":"#fafafa","edited":false},"m-page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"m-group-textColor":{"value":"#1bbfff","edited":false},"m-group-borderColor":{"value":"#ffffff","edited":false},"m-group-backgroundColor":{"value":"#ffffff","edited":false},"m-widget-textColor":{"value":"#111111","edited":false},"m-widget-backgroundColor":{"value":"#0094ce","edited":false},"m-widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"837539ab.9df378","type":"ui_spacer","name":"spacer","group":"ce7fb7d6.d66c98","order":2,"width":1,"height":1},{"id":"b87fbc7a.6c9fa","type":"ui_group","name":"Group 2","tab":"","order":2,"disp":true,"width":6},{"id":"5854f2f6.4e70fc","type":"ui_group","z":"","d":true,"name":"Top Apps","tab":"9c2efa4e.07df68","order":5,"disp":true,"width":"6","collapse":false},{"id":"ae85ae9d.ae9a7","type":"ui_group","z":"","name":"Clients ","tab":"9c2efa4e.07df68","order":2,"disp":true,"width":"9","collapse":false},{"id":"8471eae5.bd29a8","type":"ui_group","z":"","name":"Data Usage Graph","tab":"9c2efa4e.07df68","order":4,"disp":true,"width":"13","collapse":false},{"id":"e685215a.96ab4","type":"ui_spacer","name":"spacer","group":"5854f2f6.4e70fc","order":2,"width":"1","height":"1"},{"id":"2c3b286c.038d18","type":"meraki-cmx-settings","z":"","name":"scanning"},{"id":"83027531.bd16c8","type":"meraki-cmx-settings","z":"","name":"proact Delhi location scanning"},{"id":"8dab460c.cb4e88","type":"ui_group","z":"","name":"Usage","tab":"9c2efa4e.07df68","order":3,"disp":true,"width":"10","collapse":false},{"id":"4aced0c9.05f3d","type":"ui_tab","z":"","name":"Dwell Time","icon":"dashboard","order":5,"disabled":false,"hidden":false},{"id":"a4ddeb7f.6391a8","type":"ui_group","z":"","name":"Dwell Time","tab":"4aced0c9.05f3d","order":1,"disp":true,"width":"35","collapse":false},{"id":"c5975d9e.d5d59","type":"ui_group","name":"Group 1","tab":"","order":1,"disp":true,"width":6},{"id":"812ac747.a79878","type":"ui_group","z":"","name":"control","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"45de4c92.493ef4","type":"meraki-cmx-settings","z":"","name":"proact Delhi location scanning"},{"id":"78dfcd2d.d09a14","type":"ui_group","z":"","name":"Timeline","tab":"9c2efa4e.07df68","order":5,"disp":true,"width":"6","collapse":false},{"id":"7fbe099b.f28108","type":"ui_spacer","name":"spacer","group":"8dab460c.cb4e88","order":12,"width":"6","height":"1"},{"id":"9ad2a4c5.548278","type":"ui_spacer","name":"spacer","group":"8dab460c.cb4e88","order":4,"width":"10","height":1},{"id":"9be7f267.64c3d","type":"ui_group","z":"","name":"picture","tab":"286df1a1.499fce","order":9,"disp":true,"width":"6","collapse":false},{"id":"286df1a1.499fce","type":"ui_tab","z":"","name":"Dashboard","icon":"dashboard","order":4,"disabled":false,"hidden":false},{"id":"b5093743.e97ed8","type":"ui_spacer","name":"spacer","group":"8dab460c.cb4e88","order":9,"width":"2","height":1},{"id":"252f820d.129aae","type":"ui_spacer","name":"spacer","group":"8dab460c.cb4e88","order":3,"width":"3","height":1},{"id":"a237dae0.b58448","type":"ui_spacer","name":"spacer","group":"8dab460c.cb4e88","order":7,"width":1,"height":1},{"id":"5631f5a2.b316fc","type":"ui_spacer","name":"spacer","group":"8dab460c.cb4e88","order":11,"width":1,"height":1},{"id":"a57256ff.6edab8","type":"ui_group","z":"","d":true,"name":"Add Course","tab":"56f887cc.1c5168","order":4,"disp":true,"width":"6","collapse":false},{"id":"a8fb1fad.89ad1","type":"ui_group","z":"","name":"Students List","tab":"56f887cc.1c5168","order":1,"disp":true,"width":"9","collapse":false},{"id":"f56371f1.df192","type":"MySQLdatabase","z":"","host":"192.168.11.121","port":"3306","db":"Meraki","tz":""},{"id":"8d75afa2.4e686","type":"ui_group","z":"","name":"Two dimension Array","tab":"","order":2,"disp":true,"width":"14","collapse":false},{"id":"1af318c6.b10257","type":"ui_group","z":"","name":"Attend Table","tab":"56f887cc.1c5168","order":2,"disp":true,"width":"15","collapse":false},{"id":"a9b2627c.bf8b5","type":"ui_group","z":"","name":"Registered Courses","tab":"56f887cc.1c5168","order":3,"disp":true,"width":"6","collapse":false},{"id":"56f887cc.1c5168","type":"ui_tab","z":"","name":"Attendance","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"6bd6c117.fda25","type":"ui_tab","z":"","d":true,"name":"Admin Panel","icon":"dashboard","order":3,"disabled":false,"hidden":false},{"id":"25c4832.186a27c","type":"ui_group","z":"","name":"Left","tab":"6bd6c117.fda25","order":1,"disp":true,"width":"15","collapse":false},{"id":"db4302f3.6c402","type":"ui_group","z":"","name":"Right","tab":"6bd6c117.fda25","order":2,"disp":true,"width":"15","collapse":false},{"id":"b39dc806.ed3ca8","type":"ui_spacer","name":"spacer","group":"25c4832.186a27c","order":2,"width":"11","height":1},{"id":"afd36995.d42598","type":"ui_spacer","name":"spacer","group":"25c4832.186a27c","order":7,"width":"9","height":1},{"id":"dd17f4c5.657378","type":"ui_spacer","name":"spacer","group":"25c4832.186a27c","order":9,"width":"9","height":1},{"id":"9edcd910.8de1e8","type":"ui_spacer","name":"spacer","group":"25c4832.186a27c","order":4,"width":"15","height":1},{"id":"d7867bd.ab24788","type":"meraki-dashboard-api-service","z":"","host":"https://api.meraki.com/api/v0","secureApiKeyHeaderOrQueryName":"X-Cisco-Meraki-API-Key","name":"Proact Meraki"},{"id":"5bb77f5a.7394f","type":"Webex Teams Authentication","z":"","name":"Rajesh Kumar"},{"id":"825399e9.cf2928","type":"ui_group","z":"","name":"Secure","tab":"1f24c81.02e8238","disp":true,"width":"6"},{"id":"c3a3989c.d7fa68","type":"ui_group","z":"","name":"pin","tab":"1f24c81.02e8238","disp":false,"width":"1"},{"id":"1f24c81.02e8238","type":"ui_tab","z":"","name":"Home","icon":"home","order":1},{"id":"715a4744.7304d8","type":"ui_group","z":"","name":"Khu vực 1","tab":"bfd8f2c9.05e96","order":1,"disp":true,"width":"6","collapse":false},{"id":"bfd8f2c9.05e96","type":"ui_tab","z":"","name":"Biểu đồ","icon":"pie_chart","order":4,"disabled":false,"hidden":true},{"id":"640b78f6.78ade8","type":"meraki-dashboard-api","z":"133fc443.48d31c","service":"cd8881e0.b358d","name":"getOrganizations","selectedGroup":"Meraki auth users","selectedMethod":"getNetworkMerakiAuthUsers","filteredMethods":[{"methodGroup":"Meraki auth users","methodName":"getNetworkMerakiAuthUsers","parameters":[{"camelCaseName":"networkId"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkMerakiAuthUsers_networkId\"><label for=\"node-input-getNetworkMerakiAuthUsers_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkMerakiAuthUsers_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkMerakiAuthUsers_networkIdType\" value=\"string\" ></div>","example":"[\n  [\n    {\n      \"id\": \"aGlAaGkuY29t\",\n      \"email\": \"miles@meraki.com\",\n      \"name\": \"Miles Meraki\",\n      \"createdAt\": 1518365681,\n      \"accountType\": \"Guest\",\n      \"authorizations\": [\n        {\n          \"authorizedZone\": \"Store WiFi\",\n          \"expiresAt\": 1526087474,\n          \"authorizedByName\": \"Miles Meraki\",\n          \"authorizedByEmail\": \"miles@meraki.com\"\n        }\n      ]\n    }\n  ]\n]","summary":"List the splash or RADIUS users configured under Meraki Authentication for a network"},{"methodGroup":"Meraki auth users","methodName":"getNetworkMerakiAuthUser","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"merakiAuthUserId"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkMerakiAuthUser_networkId\"><label for=\"node-input-getNetworkMerakiAuthUser_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkMerakiAuthUser_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkMerakiAuthUser_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkMerakiAuthUser_merakiAuthUserId\"><label for=\"node-input-getNetworkMerakiAuthUser_merakiAuthUserId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>merakiAuthUserId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkMerakiAuthUser_merakiAuthUserId\" placeholder=\"msg.merakiAuthUserId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkMerakiAuthUser_merakiAuthUserIdType\" value=\"string\" ></div>","example":"[\n  {\n    \"id\": \"aGlAaGkuY29t\",\n    \"email\": \"miles@meraki.com\",\n    \"name\": \"Miles Meraki\",\n    \"createdAt\": 1518365681,\n    \"accountType\": \"Guest\",\n    \"authorizations\": [\n      {\n        \"authorizedZone\": \"Store WiFi\",\n        \"expiresAt\": 1526087474,\n        \"authorizedByName\": \"Miles Meraki\",\n        \"authorizedByEmail\": \"miles@meraki.com\"\n      }\n    ]\n  }\n]","summary":"Return the Meraki Auth splash or RADIUS user"}],"currentParams":[{"methodName":"getOrganizationApiRequests","camelCaseName":"organizationId","type":"str","value":"503945"},{"methodName":"getNetworkClients","camelCaseName":"networkId","type":"str","value":"L_577023702256850241"},{"methodName":"getDeviceClients","camelCaseName":"serial","type":"str","value":"L_577023702256850241"}],"storedParams":[{"methodName":"getOrganizationApiRequests","camelCaseName":"organizationId","type":"str","value":"503945"},{"methodName":"getNetworkClients","camelCaseName":"networkId","type":"str","value":"L_577023702256850241"},{"methodName":"getDeviceClients","camelCaseName":"serial","type":"str","value":"L_577023702256850241"}],"formHtml":"","method":"getNetworkMerakiAuthUsers","x":330,"y":100,"wires":[["b9951002.5122e","cc1fb020.d8091"]]},{"id":"1ec14b7d.4b71b5","type":"inject","z":"133fc443.48d31c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":100,"wires":[["640b78f6.78ade8"]]},{"id":"b9951002.5122e","type":"debug","z":"133fc443.48d31c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":630,"y":100,"wires":[]},{"id":"cc1fb020.d8091","type":"function","z":"133fc443.48d31c","name":"authenticatedUsers","func":"// var obj = JSON.parse(msg);\n// return json_object[\"name\"];\n// console.log(msg);\n// msg.lat = msg.payload[1].lat.toString(); \ncount = 0;\nvar auth_id;\nvar email;\nvar user_name;\nvar created_at;\nvar account_type;\nvar authorized_zone;\n\nmsg.topic = \"\";\nfor (i=0; i<msg.payload.length; i++) {\n    count += 1;\n    auth_id = msg.payload[i].id;\n    email = msg.payload[i].email;\n    user_name = msg.payload[i].name;\n    created_at = msg.payload[i].createdAt;\n    account_type = msg.payload[i].accountType;\n    authorized_zone = '';\n    for (j=0; j<msg.payload[i].authorizations.length; j++) {\n        authorized_zone += msg.payload[i].authorizations[j].authorizedZone+', ';\n    }\n    authorized_zone = authorized_zone.substring(0, authorized_zone.length - 2);\n    msg.topic += \"insert into auth_users(AUTHORIZED_ID, EMAIL, USER_NAME, CREATED_AT, ACCOUNT_TYPE, AUTHORIZED_ZONE) values ('\"+auth_id+\"','\"+email+\"','\"+user_name+\"','\"+created_at+\"','\"+account_type+\"','\"+authorized_zone+\"'); \";\n}\n\nmsg.count = count;\n// msg.log = msg.payload[0].id;\n\nreturn msg;","outputs":1,"noerr":0,"x":650,"y":180,"wires":[["da6e14.dee951f","19e7e8d3.1cae47"]]},{"id":"da6e14.dee951f","type":"debug","z":"133fc443.48d31c","name":"test1","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"log","targetType":"msg","x":830,"y":180,"wires":[]},{"id":"fe283ff0.09d95","type":"meraki-dashboard-api","z":"133fc443.48d31c","service":"cd8881e0.b358d","name":"getNetworkClients","selectedGroup":"Clients","selectedMethod":"getNetworkClients","filteredMethods":[{"methodGroup":"Clients","methodName":"getDeviceClients","parameters":[{"camelCaseName":"serial"},{"camelCaseName":"t0"},{"camelCaseName":"timespan"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getDeviceClients_serial\"><label for=\"node-input-getDeviceClients_serial\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>serial<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getDeviceClients_serial\" placeholder=\"msg.serial\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getDeviceClients_serialType\" value=\"string\" ></div><div class=\"form-row\" id=\"getDeviceClients_t0\"><label for=\"node-input-getDeviceClients_t0\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>t0</b> <i>&nbspstring</i></span></label><p>The beginning of the timespan for the data. The maximum lookback period is 31 days from today.</p><input type=\"text\" id=\"node-input-getDeviceClients_t0\" placeholder=\"msg.t0\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getDeviceClients_t0Type\" value=\"string\" ></div><div class=\"form-row\" id=\"getDeviceClients_timespan\"><label for=\"node-input-getDeviceClients_timespan\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>timespan</b> <i>&nbspnumber</i></span></label><p>The timespan for which the information will be fetched. If specifying timespan, do not specify parameter t0. The value must be in seconds and be less than or equal to 31 days. The default is 1 day.</p><input type=\"text\" id=\"node-input-getDeviceClients_timespan\" placeholder=\"msg.timespan\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getDeviceClients_timespanType\" value=\"number\" ></div>","example":"[\n  {\n    \"usage\": {\n      \"sent\": 138,\n      \"recv\": 61\n    },\n    \"id\": \"k74272e\",\n    \"description\": \"Miles's phone\",\n    \"mac\": \"00:11:22:33:44:55\",\n    \"ip\": \"1.2.3.4\",\n    \"user\": \"milesmeraki\",\n    \"vlan\": 255,\n    \"switchport\": null,\n    \"mdnsName\": \"Miles's phone\",\n    \"dhcpHostname\": \"MilesPhone\"\n  }\n]","summary":"List the clients of a device up to a maximum of a month ago. The usage of each client is returned in kilobytes. If the device is a switch the switchport is returned; otherwise the switchport field is null."},{"methodGroup":"Clients","methodName":"getNetworkClients","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"t0"},{"camelCaseName":"timespan"},{"camelCaseName":"perPage"},{"camelCaseName":"startingAfter"},{"camelCaseName":"endingBefore"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkClients_networkId\"><label for=\"node-input-getNetworkClients_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClients_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClients_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClients_t0\"><label for=\"node-input-getNetworkClients_t0\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>t0</b> <i>&nbspstring</i></span></label><p>The beginning of the timespan for the data. The maximum lookback period is 31 days from today.</p><input type=\"text\" id=\"node-input-getNetworkClients_t0\" placeholder=\"msg.t0\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClients_t0Type\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClients_timespan\"><label for=\"node-input-getNetworkClients_timespan\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>timespan</b> <i>&nbspnumber</i></span></label><p>The timespan for which the information will be fetched. If specifying timespan, do not specify parameter t0. The value must be in seconds and be less than or equal to 31 days. The default is 1 day.</p><input type=\"text\" id=\"node-input-getNetworkClients_timespan\" placeholder=\"msg.timespan\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClients_timespanType\" value=\"number\" ></div><div class=\"form-row\" id=\"getNetworkClients_perPage\"><label for=\"node-input-getNetworkClients_perPage\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>perPage</b> <i>&nbspinteger</i></span></label><p>The number of entries per page returned. Acceptable range is 3 - 1000. Default is 10.</p><input type=\"text\" id=\"node-input-getNetworkClients_perPage\" placeholder=\"msg.perPage\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClients_perPageType\" value=\"integer\" ></div><div class=\"form-row\" id=\"getNetworkClients_startingAfter\"><label for=\"node-input-getNetworkClients_startingAfter\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>startingAfter</b> <i>&nbspstring</i></span></label><p>A token used by the server to indicate the start of the page. Often this is a timestamp or an ID but it is not limited to those. This parameter should not be defined by client applications. The link for the first, last, prev, or next page in the HTTP Link header should define it.</p><input type=\"text\" id=\"node-input-getNetworkClients_startingAfter\" placeholder=\"msg.startingAfter\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClients_startingAfterType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClients_endingBefore\"><label for=\"node-input-getNetworkClients_endingBefore\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>endingBefore</b> <i>&nbspstring</i></span></label><p>A token used by the server to indicate the end of the page. Often this is a timestamp or an ID but it is not limited to those. This parameter should not be defined by client applications. The link for the first, last, prev, or next page in the HTTP Link header should define it.</p><input type=\"text\" id=\"node-input-getNetworkClients_endingBefore\" placeholder=\"msg.endingBefore\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClients_endingBeforeType\" value=\"string\" ></div>","example":"[\n  {\n    \"usage\": {\n      \"sent\": 138,\n      \"recv\": 61\n    },\n    \"id\": \"k74272e\",\n    \"description\": \"Miles's phone\",\n    \"mac\": \"00:11:22:33:44:55\",\n    \"ip\": \"1.2.3.4\",\n    \"user\": \"milesmeraki\",\n    \"vlan\": 255,\n    \"switchport\": null,\n    \"ip6\": \"\",\n    \"firstSeen\": 1518365681,\n    \"lastSeen\": 1526087474,\n    \"manufacturer\": \"Apple\",\n    \"os\": \"iOS\"\n  }\n]","summary":"List the clients that have used this network in the timespan"},{"methodGroup":"Clients","methodName":"provisionNetworkClients","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"provisionNetworkClients"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"provisionNetworkClients_networkId\"><label for=\"node-input-provisionNetworkClients_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-provisionNetworkClients_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-provisionNetworkClients_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"provisionNetworkClients_provisionNetworkClients\"><label for=\"node-input-provisionNetworkClients_provisionNetworkClients\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>provisionNetworkClients</b> <i>&nbsp</i></span></label><p></p><input type=\"text\" id=\"node-input-provisionNetworkClients_provisionNetworkClients\" placeholder=\"msg.provisionNetworkClients\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-provisionNetworkClients_provisionNetworkClientsType\" value=\"\" ></div>","example":"[\n  {\n    \"mac\": \"00:11:22:33:44:55\",\n    \"clientId\": \"k74272e\",\n    \"name\": \"Miles's phone\",\n    \"devicePolicy\": \"Group policy\",\n    \"groupPolicyId\": \"101\"\n  }\n]","summary":"Provisions a client with a name and policy. Clients can be provisioned before they associate to the network."},{"methodGroup":"Clients","methodName":"getNetworkClient","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkClient_networkId\"><label for=\"node-input-getNetworkClient_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClient_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClient_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClient_clientId\"><label for=\"node-input-getNetworkClient_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClient_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClient_clientIdType\" value=\"string\" ></div>","example":"[\n  {\n    \"id\": \"k74272e\",\n    \"description\": \"Miles's phone\",\n    \"mac\": \"00:11:22:33:44:55\",\n    \"ip\": \"1.2.3.4\",\n    \"user\": \"null\",\n    \"vlan\": \"255\",\n    \"switchport\": null,\n    \"ip6\": \"\",\n    \"firstSeen\": 1518365681,\n    \"lastSeen\": 1526087474,\n    \"manufacturer\": \"Apple\",\n    \"os\": \"iOS\",\n    \"ssid\": \"My SSID\",\n    \"wirelessCapabilities\": \"802.11ac - 2.4 and 5 GHz\",\n    \"smInstalled\": true,\n    \"recentDeviceMac\": \"00:11:22:33:44:55\",\n    \"clientVpnConnections\": [\n      {\n        \"remoteIp\": \"1.2.3.4\",\n        \"connectedAt\": 1522613355,\n        \"disconnectedAt\": 1522613360\n      }\n    ],\n    \"lldp\": [\n      [\n        \"System name\",\n        \"Some system name\"\n      ],\n      [\n        \"System description\",\n        \"Some system description\"\n      ],\n      [\n        \"Port ID\",\n        \"1\"\n      ],\n      [\n        \"Chassis ID\",\n        \"00:18:0a:00:00:00\"\n      ],\n      [\n        \"Port description\",\n        \"eth0\"\n      ],\n      [\n        \"System capabilities\",\n        \"Two-port MAC Relay\"\n      ]\n    ],\n    \"cdp\": null,\n    \"status\": \"Online\"\n  }\n]","summary":"Return the client associated with the given identifier. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP."},{"methodGroup":"Clients","methodName":"getNetworkClientEvents","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"},{"camelCaseName":"perPage"},{"camelCaseName":"startingAfter"},{"camelCaseName":"endingBefore"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkClientEvents_networkId\"><label for=\"node-input-getNetworkClientEvents_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientEvents_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientEvents_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientEvents_clientId\"><label for=\"node-input-getNetworkClientEvents_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientEvents_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientEvents_clientIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientEvents_perPage\"><label for=\"node-input-getNetworkClientEvents_perPage\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>perPage</b> <i>&nbspinteger</i></span></label><p>The number of entries per page returned. Acceptable range is 3 - 100. Default is 100.</p><input type=\"text\" id=\"node-input-getNetworkClientEvents_perPage\" placeholder=\"msg.perPage\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientEvents_perPageType\" value=\"integer\" ></div><div class=\"form-row\" id=\"getNetworkClientEvents_startingAfter\"><label for=\"node-input-getNetworkClientEvents_startingAfter\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>startingAfter</b> <i>&nbspstring</i></span></label><p>A token used by the server to indicate the start of the page. Often this is a timestamp or an ID but it is not limited to those. This parameter should not be defined by client applications. The link for the first, last, prev, or next page in the HTTP Link header should define it.</p><input type=\"text\" id=\"node-input-getNetworkClientEvents_startingAfter\" placeholder=\"msg.startingAfter\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientEvents_startingAfterType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientEvents_endingBefore\"><label for=\"node-input-getNetworkClientEvents_endingBefore\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>endingBefore</b> <i>&nbspstring</i></span></label><p>A token used by the server to indicate the end of the page. Often this is a timestamp or an ID but it is not limited to those. This parameter should not be defined by client applications. The link for the first, last, prev, or next page in the HTTP Link header should define it.</p><input type=\"text\" id=\"node-input-getNetworkClientEvents_endingBefore\" placeholder=\"msg.endingBefore\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientEvents_endingBeforeType\" value=\"string\" ></div>","example":"[\n  [\n    {\n      \"deviceSerial\": \"Q234-ABCD-5678\",\n      \"occurredAt\": 1518365681,\n      \"type\": \"l3roaming_assoc_start\",\n      \"details\": {\n        \"vap\": \"1\",\n        \"on_packet\": \"true\"\n      }\n    }\n  ]\n]","summary":"Return the events associated with this client. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP."},{"methodGroup":"Clients","methodName":"getNetworkClientLatencyHistory","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"},{"camelCaseName":"t0"},{"camelCaseName":"t1"},{"camelCaseName":"timespan"},{"camelCaseName":"resolution"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkClientLatencyHistory_networkId\"><label for=\"node-input-getNetworkClientLatencyHistory_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientLatencyHistory_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientLatencyHistory_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientLatencyHistory_clientId\"><label for=\"node-input-getNetworkClientLatencyHistory_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientLatencyHistory_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientLatencyHistory_clientIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientLatencyHistory_t0\"><label for=\"node-input-getNetworkClientLatencyHistory_t0\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>t0</b> <i>&nbspstring</i></span></label><p>The beginning of the timespan for the data. The maximum lookback period is 791 days from today.</p><input type=\"text\" id=\"node-input-getNetworkClientLatencyHistory_t0\" placeholder=\"msg.t0\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientLatencyHistory_t0Type\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientLatencyHistory_t1\"><label for=\"node-input-getNetworkClientLatencyHistory_t1\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>t1</b> <i>&nbspstring</i></span></label><p>The end of the timespan for the data. t1 can be a maximum of 791 days after t0.</p><input type=\"text\" id=\"node-input-getNetworkClientLatencyHistory_t1\" placeholder=\"msg.t1\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientLatencyHistory_t1Type\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientLatencyHistory_timespan\"><label for=\"node-input-getNetworkClientLatencyHistory_timespan\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>timespan</b> <i>&nbspnumber</i></span></label><p>The timespan for which the information will be fetched. If specifying timespan, do not specify parameters t0 and t1. The value must be in seconds and be less than or equal to 791 days. The default is 1 day.</p><input type=\"text\" id=\"node-input-getNetworkClientLatencyHistory_timespan\" placeholder=\"msg.timespan\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientLatencyHistory_timespanType\" value=\"number\" ></div><div class=\"form-row\" id=\"getNetworkClientLatencyHistory_resolution\"><label for=\"node-input-getNetworkClientLatencyHistory_resolution\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>resolution</b> <i>&nbspinteger</i></span></label><p>The time resolution in seconds for returned data. The valid resolutions are: 86400. The default is 86400.</p><input type=\"text\" id=\"node-input-getNetworkClientLatencyHistory_resolution\" placeholder=\"msg.resolution\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientLatencyHistory_resolutionType\" value=\"integer\" ></div>","example":"[\n  [\n    {\n      \"t0\": 1550534400,\n      \"t1\": 1550620800,\n      \"latencyBinsByCategory\": {\n        \"backgroundTraffic\": {\n          \"0.5\": 41750,\n          \"1.0\": 21552,\n          \"2.0\": 59940,\n          \"4.0\": 146622,\n          \"8.0\": 57354,\n          \"16.0\": 0,\n          \"32.0\": 9954,\n          \"64.0\": 0,\n          \"128.0\": 0,\n          \"256.0\": 1896,\n          \"512.0\": 0,\n          \"1024.0\": 0,\n          \"2048.0\": 0\n        },\n        \"bestEffortTraffic\": {\n          \"0.5\": 1840899,\n          \"1.0\": 1644506,\n          \"2.0\": 629958,\n          \"4.0\": 449564,\n          \"8.0\": 2009658,\n          \"16.0\": 1329568,\n          \"32.0\": 282168,\n          \"64.0\": 97573,\n          \"128.0\": 191977,\n          \"256.0\": 30560,\n          \"512.0\": 26032,\n          \"1024.0\": 4943,\n          \"2048.0\": 12072\n        },\n        \"videoTraffic\": {\n          \"0.5\": 0,\n          \"1.0\": 0,\n          \"2.0\": 0,\n          \"4.0\": 0,\n          \"8.0\": 0,\n          \"16.0\": 0,\n          \"32.0\": 0,\n          \"64.0\": 0,\n          \"128.0\": 0,\n          \"256.0\": 0,\n          \"512.0\": 0,\n          \"1024.0\": 0,\n          \"2048.0\": 0\n        },\n        \"voiceTraffic\": {\n          \"0.5\": 716,\n          \"1.0\": 948,\n          \"2.0\": 474,\n          \"4.0\": 78,\n          \"8.0\": 0,\n          \"16.0\": 0,\n          \"32.0\": 0,\n          \"64.0\": 0,\n          \"128.0\": 0,\n          \"256.0\": 0,\n          \"512.0\": 0,\n          \"1024.0\": 0,\n          \"2048.0\": 0\n        }\n      }\n    }\n  ]\n]","summary":"Return the latency history for a client. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP. The latency data is from a sample of 2% of packets and is grouped into 4 traffic categories: background best effort video voice. Within these categories the sampled packet counters are bucketed by latency in milliseconds."},{"methodGroup":"Clients","methodName":"getNetworkClientPolicy","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkClientPolicy_networkId\"><label for=\"node-input-getNetworkClientPolicy_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientPolicy_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientPolicy_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientPolicy_clientId\"><label for=\"node-input-getNetworkClientPolicy_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientPolicy_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientPolicy_clientIdType\" value=\"string\" ></div>","example":"[\n  {\n    \"mac\": \"00:11:22:33:44:55\",\n    \"type\": \"Group policy\",\n    \"groupPolicyId\": \"101\"\n  }\n]","summary":"Return the policy assigned to a client on the network. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP."},{"methodGroup":"Clients","methodName":"updateNetworkClientPolicy","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"},{"camelCaseName":"updateNetworkClientPolicy"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"updateNetworkClientPolicy_networkId\"><label for=\"node-input-updateNetworkClientPolicy_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-updateNetworkClientPolicy_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-updateNetworkClientPolicy_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"updateNetworkClientPolicy_clientId\"><label for=\"node-input-updateNetworkClientPolicy_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-updateNetworkClientPolicy_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-updateNetworkClientPolicy_clientIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"updateNetworkClientPolicy_updateNetworkClientPolicy\"><label for=\"node-input-updateNetworkClientPolicy_updateNetworkClientPolicy\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>updateNetworkClientPolicy</b> <i>&nbsp</i></span></label><p></p><input type=\"text\" id=\"node-input-updateNetworkClientPolicy_updateNetworkClientPolicy\" placeholder=\"msg.updateNetworkClientPolicy\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-updateNetworkClientPolicy_updateNetworkClientPolicyType\" value=\"\" ></div>","example":"[\n  {\n    \"mac\": \"00:11:22:33:44:55\",\n    \"type\": \"Group policy\",\n    \"groupPolicyId\": \"101\"\n  }\n]","summary":"Update the policy assigned to a client on the network. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP."},{"methodGroup":"Clients","methodName":"getNetworkClientSplashAuthorizationStatus","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkClientSplashAuthorizationStatus_networkId\"><label for=\"node-input-getNetworkClientSplashAuthorizationStatus_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientSplashAuthorizationStatus_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientSplashAuthorizationStatus_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientSplashAuthorizationStatus_clientId\"><label for=\"node-input-getNetworkClientSplashAuthorizationStatus_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientSplashAuthorizationStatus_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientSplashAuthorizationStatus_clientIdType\" value=\"string\" ></div>","example":"[\n  {\n    \"ssids\": {\n      \"0\": {\n        \"isAuthorized\": true,\n        \"authorizedAt\": \"2017-07-19 16:24:13 UTC\",\n        \"expiresAt\": \"2017-07-20 16:24:13 UTC\"\n      },\n      \"2\": {\n        \"isAuthorized\": false\n      }\n    }\n  }\n]","summary":"Return the splash authorization for a client for each SSID theyve associated with through splash. Only enabled SSIDs with Click-through splash enabled will be included. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP."},{"methodGroup":"Clients","methodName":"updateNetworkClientSplashAuthorizationStatus","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"},{"camelCaseName":"updateNetworkClientSplashAuthorizationStatus"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"updateNetworkClientSplashAuthorizationStatus_networkId\"><label for=\"node-input-updateNetworkClientSplashAuthorizationStatus_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-updateNetworkClientSplashAuthorizationStatus_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-updateNetworkClientSplashAuthorizationStatus_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"updateNetworkClientSplashAuthorizationStatus_clientId\"><label for=\"node-input-updateNetworkClientSplashAuthorizationStatus_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-updateNetworkClientSplashAuthorizationStatus_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-updateNetworkClientSplashAuthorizationStatus_clientIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"updateNetworkClientSplashAuthorizationStatus_updateNetworkClientSplashAuthorizationStatus\"><label for=\"node-input-updateNetworkClientSplashAuthorizationStatus_updateNetworkClientSplashAuthorizationStatus\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>updateNetworkClientSplashAuthorizationStatus</b> <i>&nbsp</i></span></label><p></p><input type=\"text\" id=\"node-input-updateNetworkClientSplashAuthorizationStatus_updateNetworkClientSplashAuthorizationStatus\" placeholder=\"msg.updateNetworkClientSplashAuthorizationStatus\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-updateNetworkClientSplashAuthorizationStatus_updateNetworkClientSplashAuthorizationStatusType\" value=\"\" ></div>","example":"[\n  {\n    \"ssids\": {\n      \"0\": {\n        \"isAuthorized\": true,\n        \"authorizedAt\": \"2017-07-19 16:24:13 UTC\",\n        \"expiresAt\": \"2017-07-20 16:24:13 UTC\"\n      },\n      \"2\": {\n        \"isAuthorized\": false\n      }\n    }\n  }\n]","summary":"Update a clients splash authorization. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP."},{"methodGroup":"Clients","methodName":"getNetworkClientTrafficHistory","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"},{"camelCaseName":"perPage"},{"camelCaseName":"startingAfter"},{"camelCaseName":"endingBefore"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkClientTrafficHistory_networkId\"><label for=\"node-input-getNetworkClientTrafficHistory_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientTrafficHistory_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientTrafficHistory_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientTrafficHistory_clientId\"><label for=\"node-input-getNetworkClientTrafficHistory_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientTrafficHistory_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientTrafficHistory_clientIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientTrafficHistory_perPage\"><label for=\"node-input-getNetworkClientTrafficHistory_perPage\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>perPage</b> <i>&nbspinteger</i></span></label><p>The number of entries per page returned. Acceptable range is 3 - 1000.</p><input type=\"text\" id=\"node-input-getNetworkClientTrafficHistory_perPage\" placeholder=\"msg.perPage\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientTrafficHistory_perPageType\" value=\"integer\" ></div><div class=\"form-row\" id=\"getNetworkClientTrafficHistory_startingAfter\"><label for=\"node-input-getNetworkClientTrafficHistory_startingAfter\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>startingAfter</b> <i>&nbspstring</i></span></label><p>A token used by the server to indicate the start of the page. Often this is a timestamp or an ID but it is not limited to those. This parameter should not be defined by client applications. The link for the first, last, prev, or next page in the HTTP Link header should define it.</p><input type=\"text\" id=\"node-input-getNetworkClientTrafficHistory_startingAfter\" placeholder=\"msg.startingAfter\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientTrafficHistory_startingAfterType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientTrafficHistory_endingBefore\"><label for=\"node-input-getNetworkClientTrafficHistory_endingBefore\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>endingBefore</b> <i>&nbspstring</i></span></label><p>A token used by the server to indicate the end of the page. Often this is a timestamp or an ID but it is not limited to those. This parameter should not be defined by client applications. The link for the first, last, prev, or next page in the HTTP Link header should define it.</p><input type=\"text\" id=\"node-input-getNetworkClientTrafficHistory_endingBefore\" placeholder=\"msg.endingBefore\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientTrafficHistory_endingBeforeType\" value=\"string\" ></div>","example":"[\n  [\n    {\n      \"ts\": 1518365681,\n      \"application\": \"Google\",\n      \"destination\": \"www.google.com\",\n      \"protocol\": \"UDP\",\n      \"port\": 443,\n      \"recv\": 383,\n      \"sent\": 56,\n      \"numFlows\": 5,\n      \"activeSeconds\": 240\n    }\n  ]\n]","summary":"Return the clients network traffic data over time. Usage data is in kilobytes. This endpoint requires detailed traffic analysis to be enabled on the Network-wide > General page. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP."},{"methodGroup":"Clients","methodName":"getNetworkClientUsageHistory","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkClientUsageHistory_networkId\"><label for=\"node-input-getNetworkClientUsageHistory_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientUsageHistory_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientUsageHistory_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientUsageHistory_clientId\"><label for=\"node-input-getNetworkClientUsageHistory_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientUsageHistory_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientUsageHistory_clientIdType\" value=\"string\" ></div>","example":"[\n  [\n    {\n      \"sent\": 500,\n      \"received\": 680,\n      \"ts\": 1518365681\n    }\n  ]\n]","summary":"Return the clients daily usage history. Usage data is in kilobytes. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP."}],"currentParams":[{"methodName":"getNetworkClients","camelCaseName":"networkId","type":"str","value":"L_577023702256850241"},{"methodName":"getNetworkClients","camelCaseName":"t0","type":"str","value":""},{"methodName":"getNetworkClients","camelCaseName":"perPage","type":"str","value":"1000"},{"methodName":"getNetworkClients","camelCaseName":"timespan","type":"str","value":""}],"storedParams":[{"methodName":"getNetworkClients","camelCaseName":"networkId","type":"str","value":"L_577023702256850241"},{"methodName":"getNetworkClients","camelCaseName":"t0","type":"str","value":""},{"methodName":"getNetworkClients","camelCaseName":"perPage","type":"str","value":"1000"},{"methodName":"getNetworkClients","camelCaseName":"timespan","type":"str","value":""}],"formHtml":"","method":"getNetworkClients","x":330,"y":260,"wires":[["1fd4ba2c.ece006","211caba5.44c5f4"]]},{"id":"42a3698d.5f9f28","type":"inject","z":"133fc443.48d31c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":260,"wires":[["fe283ff0.09d95"]]},{"id":"1fd4ba2c.ece006","type":"debug","z":"133fc443.48d31c","name":"APILog","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":700,"y":259,"wires":[]},{"id":"211caba5.44c5f4","type":"function","z":"133fc443.48d31c","name":"clientsData","func":"\n// var obj = JSON.parse(msg);\n// return json_object[\"name\"];\n// console.log(msg);\n// msg.lat = msg.payload[1].lat.toString(); \ncount = 0;\nvar clientId=[];\nvar mac=[];\nvar user=[];\nvar manufacturer=[];\nvar status=[];\nvar description=[];\nvar lastSeen=[];\nvar usageSent=[];\nvar usageRecv=[];\nvar os=[];\nvar ipv4=[];\nvar firstSeen=[];\nvar connectedTo=[];\n\nmsg.topic = \"\";\nfor (i=0; i<msg.payload.length; i++) {\n    count += 1;\n    clientId = msg.payload[i].id;\n    user = msg.payload[i].user;\n    ipv4 = msg.payload[i].ip;\n    manufacturer = msg.payload[i].manufacturer;\n    os = msg.payload[i].os;\n    firstSeen = msg.payload[i].firstSeen;\n    lastSeen = msg.payload[i].lastSeen;\n    connectedTo = msg.payload[i].recentDeviceName;\n    mac = msg.payload[i].mac;\n    description = msg.payload[i].description;\n    os = msg.payload[i].os;\n    usageSent = msg.payload[i].usage.sent;\n    usageRecv = msg.payload[i].usage.recv;\n    msg.topic += 'insert into clients2(CLIENT_ID, USER_NAME, MAC, IP, MANUFACTURER, OS, DESCRIPTION, FIRSTSEEN, LASTSEEN, CONNECTED_TO, USAGE_SENT, USAGE_RECV) values (\"'+clientId+'\",\"'+user+'\",\"'+mac+'\",\"'+ipv4+'\",\"'+manufacturer+'\",\"'+os+'\",\"'+description+'\",\"'+firstSeen+'\",\"'+lastSeen+'\",\"'+connectedTo+'\",\"'+usageSent+'\",\"'+usageRecv+'\"); ';\n}\n\nmsg.count = count;\n// msg.log = msg.payload[0].id;\n\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":320,"wires":[["2521ffd2.6a35f","19e7e8d3.1cae47"]]},{"id":"2521ffd2.6a35f","type":"debug","z":"133fc443.48d31c","name":"queryLog","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":720,"y":320,"wires":[]},{"id":"19e7e8d3.1cae47","type":"mysql","z":"133fc443.48d31c","mydb":"52258174.c9c2c","name":"clients","x":1110,"y":220,"wires":[["73e5b9b9.7c4248"]]},{"id":"73e5b9b9.7c4248","type":"debug","z":"133fc443.48d31c","name":"DBLog","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1270,"y":220,"wires":[]},{"id":"b574b75d.182308","type":"inject","z":"133fc443.48d31c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":520,"wires":[["b32e6254.e8ecf"]]},{"id":"b32e6254.e8ecf","type":"function","z":"133fc443.48d31c","name":"test query","func":"var test = [];\ntest = [9,9,9,9,9];\nq = \"select a.*, t1.mac from auth_users as a left join (select * from clients where clients.user_name != 'null') as t1 on a.email = t1.user_name;\";\nmsg.topic = q;\nreturn msg;","outputs":1,"noerr":0,"x":300,"y":520,"wires":[["3932b8d.2548848","b5ec5e7e.2d60b"]]},{"id":"3932b8d.2548848","type":"debug","z":"133fc443.48d31c","name":"","active":true,"tosidebar":false,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":510,"y":520,"wires":[]},{"id":"17fe8653.1c9aba","type":"function","z":"133fc443.48d31c","name":"join","func":"query = \"select * from clients where user_name is not null\";\nmsg.topic = query;\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":600,"wires":[["912ca75f.8ded08","b5ec5e7e.2d60b"]]},{"id":"d9e42bcd.c030f8","type":"inject","z":"133fc443.48d31c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":600,"wires":[["17fe8653.1c9aba"]]},{"id":"912ca75f.8ded08","type":"debug","z":"133fc443.48d31c","name":"join output","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":470,"y":600,"wires":[]},{"id":"9cf31686.bda038","type":"inject","z":"133fc443.48d31c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":400,"wires":[["8251e2bf.f7403"]]},{"id":"ff62e9ed.d0e1f8","type":"function","z":"133fc443.48d31c","name":"application ","func":"\n// var obj = JSON.parse(msg);\n// return json_object[\"name\"];\n// console.log(msg);\n// msg.lat = msg.payload[1].lat.toString(); \ncount = 0;\nvar clientId=[];\nvar mac=[];\nvar user=[];\nvar manufacturer=[];\nvar status=[];\nvar description=[];\nvar lastSeen=[];\nvar usageSent=[];\nvar usageRecv=[];\nvar os=[];\nvar ipv4=[];\nvar firstSeen=[];\nvar connectedTo=[];\n\nmsg.topic = \"\";\nfor (i=0; i<msg.payload.length; i++) {\n    count += 1;\n    clientId = msg.payload[i].id;\n    user = msg.payload[i].user;\n    ipv4 = msg.payload[i].ip;\n    manufacturer = msg.payload[i].manufacturer;\n    os = msg.payload[i].os;\n    firstSeen = msg.payload[i].firstSeen;\n    lastSeen = msg.payload[i].lastSeen;\n    connectedTo = msg.payload[i].recentDeviceName;\n    mac = msg.payload[i].mac;\n    description = msg.payload[i].description;\n    os = msg.payload[i].os;\n    usageSent = msg.payload[i].usage.sent;\n    usageRecv = msg.payload[i].usage.recv;\n    msg.topic += 'insert into clients2(CLIENT_ID, USER_NAME, MAC, IP, MANUFACTURER, OS, DESCRIPTION, FIRSTSEEN, LASTSEEN, CONNECTED_TO, USAGE_SENT, USAGE_RECV) values (\"'+clientId+'\",\"'+user+'\",\"'+mac+'\",\"'+ipv4+'\",\"'+manufacturer+'\",\"'+os+'\",\"'+description+'\",\"'+firstSeen+'\",\"'+lastSeen+'\",\"'+connectedTo+'\",\"'+usageSent+'\",\"'+usageRecv+'\"); ';\n}\n\nmsg.count = count;\n// msg.log = msg.payload[0].id;\n\nreturn msg;","outputs":1,"noerr":0,"x":590,"y":400,"wires":[["d07853e7.2607","19e7e8d3.1cae47"]]},{"id":"d07853e7.2607","type":"debug","z":"133fc443.48d31c","name":"application output","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":810,"y":400,"wires":[]},{"id":"8251e2bf.f7403","type":"meraki-dashboard-api","z":"133fc443.48d31c","service":"cd8881e0.b358d","name":"getNetworkClientUsageHistory","selectedGroup":"Clients","selectedMethod":"getNetworkClientUsageHistory","filteredMethods":[{"methodGroup":"Clients","methodName":"getDeviceClients","parameters":[{"camelCaseName":"serial"},{"camelCaseName":"t0"},{"camelCaseName":"timespan"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getDeviceClients_serial\"><label for=\"node-input-getDeviceClients_serial\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>serial<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getDeviceClients_serial\" placeholder=\"msg.serial\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getDeviceClients_serialType\" value=\"string\" ></div><div class=\"form-row\" id=\"getDeviceClients_t0\"><label for=\"node-input-getDeviceClients_t0\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>t0</b> <i>&nbspstring</i></span></label><p>The beginning of the timespan for the data. The maximum lookback period is 31 days from today.</p><input type=\"text\" id=\"node-input-getDeviceClients_t0\" placeholder=\"msg.t0\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getDeviceClients_t0Type\" value=\"string\" ></div><div class=\"form-row\" id=\"getDeviceClients_timespan\"><label for=\"node-input-getDeviceClients_timespan\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>timespan</b> <i>&nbspnumber</i></span></label><p>The timespan for which the information will be fetched. If specifying timespan, do not specify parameter t0. The value must be in seconds and be less than or equal to 31 days. The default is 1 day.</p><input type=\"text\" id=\"node-input-getDeviceClients_timespan\" placeholder=\"msg.timespan\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getDeviceClients_timespanType\" value=\"number\" ></div>","example":"[\n  {\n    \"usage\": {\n      \"sent\": 138,\n      \"recv\": 61\n    },\n    \"id\": \"k74272e\",\n    \"description\": \"Miles's phone\",\n    \"mac\": \"00:11:22:33:44:55\",\n    \"ip\": \"1.2.3.4\",\n    \"user\": \"milesmeraki\",\n    \"vlan\": 255,\n    \"switchport\": null,\n    \"mdnsName\": \"Miles's phone\",\n    \"dhcpHostname\": \"MilesPhone\"\n  }\n]","summary":"List the clients of a device up to a maximum of a month ago. The usage of each client is returned in kilobytes. If the device is a switch the switchport is returned; otherwise the switchport field is null."},{"methodGroup":"Clients","methodName":"getNetworkClients","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"t0"},{"camelCaseName":"timespan"},{"camelCaseName":"perPage"},{"camelCaseName":"startingAfter"},{"camelCaseName":"endingBefore"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkClients_networkId\"><label for=\"node-input-getNetworkClients_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClients_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClients_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClients_t0\"><label for=\"node-input-getNetworkClients_t0\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>t0</b> <i>&nbspstring</i></span></label><p>The beginning of the timespan for the data. The maximum lookback period is 31 days from today.</p><input type=\"text\" id=\"node-input-getNetworkClients_t0\" placeholder=\"msg.t0\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClients_t0Type\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClients_timespan\"><label for=\"node-input-getNetworkClients_timespan\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>timespan</b> <i>&nbspnumber</i></span></label><p>The timespan for which the information will be fetched. If specifying timespan, do not specify parameter t0. The value must be in seconds and be less than or equal to 31 days. The default is 1 day.</p><input type=\"text\" id=\"node-input-getNetworkClients_timespan\" placeholder=\"msg.timespan\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClients_timespanType\" value=\"number\" ></div><div class=\"form-row\" id=\"getNetworkClients_perPage\"><label for=\"node-input-getNetworkClients_perPage\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>perPage</b> <i>&nbspinteger</i></span></label><p>The number of entries per page returned. Acceptable range is 3 - 1000. Default is 10.</p><input type=\"text\" id=\"node-input-getNetworkClients_perPage\" placeholder=\"msg.perPage\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClients_perPageType\" value=\"integer\" ></div><div class=\"form-row\" id=\"getNetworkClients_startingAfter\"><label for=\"node-input-getNetworkClients_startingAfter\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>startingAfter</b> <i>&nbspstring</i></span></label><p>A token used by the server to indicate the start of the page. Often this is a timestamp or an ID but it is not limited to those. This parameter should not be defined by client applications. The link for the first, last, prev, or next page in the HTTP Link header should define it.</p><input type=\"text\" id=\"node-input-getNetworkClients_startingAfter\" placeholder=\"msg.startingAfter\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClients_startingAfterType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClients_endingBefore\"><label for=\"node-input-getNetworkClients_endingBefore\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>endingBefore</b> <i>&nbspstring</i></span></label><p>A token used by the server to indicate the end of the page. Often this is a timestamp or an ID but it is not limited to those. This parameter should not be defined by client applications. The link for the first, last, prev, or next page in the HTTP Link header should define it.</p><input type=\"text\" id=\"node-input-getNetworkClients_endingBefore\" placeholder=\"msg.endingBefore\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClients_endingBeforeType\" value=\"string\" ></div>","example":"[\n  {\n    \"usage\": {\n      \"sent\": 138,\n      \"recv\": 61\n    },\n    \"id\": \"k74272e\",\n    \"description\": \"Miles's phone\",\n    \"mac\": \"00:11:22:33:44:55\",\n    \"ip\": \"1.2.3.4\",\n    \"user\": \"milesmeraki\",\n    \"vlan\": 255,\n    \"switchport\": null,\n    \"ip6\": \"\",\n    \"firstSeen\": 1518365681,\n    \"lastSeen\": 1526087474,\n    \"manufacturer\": \"Apple\",\n    \"os\": \"iOS\"\n  }\n]","summary":"List the clients that have used this network in the timespan"},{"methodGroup":"Clients","methodName":"provisionNetworkClients","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"provisionNetworkClients"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"provisionNetworkClients_networkId\"><label for=\"node-input-provisionNetworkClients_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-provisionNetworkClients_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-provisionNetworkClients_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"provisionNetworkClients_provisionNetworkClients\"><label for=\"node-input-provisionNetworkClients_provisionNetworkClients\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>provisionNetworkClients</b> <i>&nbsp</i></span></label><p></p><input type=\"text\" id=\"node-input-provisionNetworkClients_provisionNetworkClients\" placeholder=\"msg.provisionNetworkClients\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-provisionNetworkClients_provisionNetworkClientsType\" value=\"\" ></div>","example":"[\n  {\n    \"mac\": \"00:11:22:33:44:55\",\n    \"clientId\": \"k74272e\",\n    \"name\": \"Miles's phone\",\n    \"devicePolicy\": \"Group policy\",\n    \"groupPolicyId\": \"101\"\n  }\n]","summary":"Provisions a client with a name and policy. Clients can be provisioned before they associate to the network."},{"methodGroup":"Clients","methodName":"getNetworkClient","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkClient_networkId\"><label for=\"node-input-getNetworkClient_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClient_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClient_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClient_clientId\"><label for=\"node-input-getNetworkClient_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClient_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClient_clientIdType\" value=\"string\" ></div>","example":"[\n  {\n    \"id\": \"k74272e\",\n    \"description\": \"Miles's phone\",\n    \"mac\": \"00:11:22:33:44:55\",\n    \"ip\": \"1.2.3.4\",\n    \"user\": \"null\",\n    \"vlan\": \"255\",\n    \"switchport\": null,\n    \"ip6\": \"\",\n    \"firstSeen\": 1518365681,\n    \"lastSeen\": 1526087474,\n    \"manufacturer\": \"Apple\",\n    \"os\": \"iOS\",\n    \"ssid\": \"My SSID\",\n    \"wirelessCapabilities\": \"802.11ac - 2.4 and 5 GHz\",\n    \"smInstalled\": true,\n    \"recentDeviceMac\": \"00:11:22:33:44:55\",\n    \"clientVpnConnections\": [\n      {\n        \"remoteIp\": \"1.2.3.4\",\n        \"connectedAt\": 1522613355,\n        \"disconnectedAt\": 1522613360\n      }\n    ],\n    \"lldp\": [\n      [\n        \"System name\",\n        \"Some system name\"\n      ],\n      [\n        \"System description\",\n        \"Some system description\"\n      ],\n      [\n        \"Port ID\",\n        \"1\"\n      ],\n      [\n        \"Chassis ID\",\n        \"00:18:0a:00:00:00\"\n      ],\n      [\n        \"Port description\",\n        \"eth0\"\n      ],\n      [\n        \"System capabilities\",\n        \"Two-port MAC Relay\"\n      ]\n    ],\n    \"cdp\": null,\n    \"status\": \"Online\"\n  }\n]","summary":"Return the client associated with the given identifier. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP."},{"methodGroup":"Clients","methodName":"getNetworkClientEvents","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"},{"camelCaseName":"perPage"},{"camelCaseName":"startingAfter"},{"camelCaseName":"endingBefore"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkClientEvents_networkId\"><label for=\"node-input-getNetworkClientEvents_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientEvents_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientEvents_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientEvents_clientId\"><label for=\"node-input-getNetworkClientEvents_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientEvents_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientEvents_clientIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientEvents_perPage\"><label for=\"node-input-getNetworkClientEvents_perPage\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>perPage</b> <i>&nbspinteger</i></span></label><p>The number of entries per page returned. Acceptable range is 3 - 100. Default is 100.</p><input type=\"text\" id=\"node-input-getNetworkClientEvents_perPage\" placeholder=\"msg.perPage\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientEvents_perPageType\" value=\"integer\" ></div><div class=\"form-row\" id=\"getNetworkClientEvents_startingAfter\"><label for=\"node-input-getNetworkClientEvents_startingAfter\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>startingAfter</b> <i>&nbspstring</i></span></label><p>A token used by the server to indicate the start of the page. Often this is a timestamp or an ID but it is not limited to those. This parameter should not be defined by client applications. The link for the first, last, prev, or next page in the HTTP Link header should define it.</p><input type=\"text\" id=\"node-input-getNetworkClientEvents_startingAfter\" placeholder=\"msg.startingAfter\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientEvents_startingAfterType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientEvents_endingBefore\"><label for=\"node-input-getNetworkClientEvents_endingBefore\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>endingBefore</b> <i>&nbspstring</i></span></label><p>A token used by the server to indicate the end of the page. Often this is a timestamp or an ID but it is not limited to those. This parameter should not be defined by client applications. The link for the first, last, prev, or next page in the HTTP Link header should define it.</p><input type=\"text\" id=\"node-input-getNetworkClientEvents_endingBefore\" placeholder=\"msg.endingBefore\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientEvents_endingBeforeType\" value=\"string\" ></div>","example":"[\n  [\n    {\n      \"deviceSerial\": \"Q234-ABCD-5678\",\n      \"occurredAt\": 1518365681,\n      \"type\": \"l3roaming_assoc_start\",\n      \"details\": {\n        \"vap\": \"1\",\n        \"on_packet\": \"true\"\n      }\n    }\n  ]\n]","summary":"Return the events associated with this client. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP."},{"methodGroup":"Clients","methodName":"getNetworkClientLatencyHistory","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"},{"camelCaseName":"t0"},{"camelCaseName":"t1"},{"camelCaseName":"timespan"},{"camelCaseName":"resolution"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkClientLatencyHistory_networkId\"><label for=\"node-input-getNetworkClientLatencyHistory_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientLatencyHistory_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientLatencyHistory_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientLatencyHistory_clientId\"><label for=\"node-input-getNetworkClientLatencyHistory_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientLatencyHistory_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientLatencyHistory_clientIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientLatencyHistory_t0\"><label for=\"node-input-getNetworkClientLatencyHistory_t0\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>t0</b> <i>&nbspstring</i></span></label><p>The beginning of the timespan for the data. The maximum lookback period is 791 days from today.</p><input type=\"text\" id=\"node-input-getNetworkClientLatencyHistory_t0\" placeholder=\"msg.t0\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientLatencyHistory_t0Type\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientLatencyHistory_t1\"><label for=\"node-input-getNetworkClientLatencyHistory_t1\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>t1</b> <i>&nbspstring</i></span></label><p>The end of the timespan for the data. t1 can be a maximum of 791 days after t0.</p><input type=\"text\" id=\"node-input-getNetworkClientLatencyHistory_t1\" placeholder=\"msg.t1\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientLatencyHistory_t1Type\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientLatencyHistory_timespan\"><label for=\"node-input-getNetworkClientLatencyHistory_timespan\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>timespan</b> <i>&nbspnumber</i></span></label><p>The timespan for which the information will be fetched. If specifying timespan, do not specify parameters t0 and t1. The value must be in seconds and be less than or equal to 791 days. The default is 1 day.</p><input type=\"text\" id=\"node-input-getNetworkClientLatencyHistory_timespan\" placeholder=\"msg.timespan\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientLatencyHistory_timespanType\" value=\"number\" ></div><div class=\"form-row\" id=\"getNetworkClientLatencyHistory_resolution\"><label for=\"node-input-getNetworkClientLatencyHistory_resolution\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>resolution</b> <i>&nbspinteger</i></span></label><p>The time resolution in seconds for returned data. The valid resolutions are: 86400. The default is 86400.</p><input type=\"text\" id=\"node-input-getNetworkClientLatencyHistory_resolution\" placeholder=\"msg.resolution\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientLatencyHistory_resolutionType\" value=\"integer\" ></div>","example":"[\n  [\n    {\n      \"t0\": 1550534400,\n      \"t1\": 1550620800,\n      \"latencyBinsByCategory\": {\n        \"backgroundTraffic\": {\n          \"0.5\": 41750,\n          \"1.0\": 21552,\n          \"2.0\": 59940,\n          \"4.0\": 146622,\n          \"8.0\": 57354,\n          \"16.0\": 0,\n          \"32.0\": 9954,\n          \"64.0\": 0,\n          \"128.0\": 0,\n          \"256.0\": 1896,\n          \"512.0\": 0,\n          \"1024.0\": 0,\n          \"2048.0\": 0\n        },\n        \"bestEffortTraffic\": {\n          \"0.5\": 1840899,\n          \"1.0\": 1644506,\n          \"2.0\": 629958,\n          \"4.0\": 449564,\n          \"8.0\": 2009658,\n          \"16.0\": 1329568,\n          \"32.0\": 282168,\n          \"64.0\": 97573,\n          \"128.0\": 191977,\n          \"256.0\": 30560,\n          \"512.0\": 26032,\n          \"1024.0\": 4943,\n          \"2048.0\": 12072\n        },\n        \"videoTraffic\": {\n          \"0.5\": 0,\n          \"1.0\": 0,\n          \"2.0\": 0,\n          \"4.0\": 0,\n          \"8.0\": 0,\n          \"16.0\": 0,\n          \"32.0\": 0,\n          \"64.0\": 0,\n          \"128.0\": 0,\n          \"256.0\": 0,\n          \"512.0\": 0,\n          \"1024.0\": 0,\n          \"2048.0\": 0\n        },\n        \"voiceTraffic\": {\n          \"0.5\": 716,\n          \"1.0\": 948,\n          \"2.0\": 474,\n          \"4.0\": 78,\n          \"8.0\": 0,\n          \"16.0\": 0,\n          \"32.0\": 0,\n          \"64.0\": 0,\n          \"128.0\": 0,\n          \"256.0\": 0,\n          \"512.0\": 0,\n          \"1024.0\": 0,\n          \"2048.0\": 0\n        }\n      }\n    }\n  ]\n]","summary":"Return the latency history for a client. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP. The latency data is from a sample of 2% of packets and is grouped into 4 traffic categories: background best effort video voice. Within these categories the sampled packet counters are bucketed by latency in milliseconds."},{"methodGroup":"Clients","methodName":"getNetworkClientPolicy","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkClientPolicy_networkId\"><label for=\"node-input-getNetworkClientPolicy_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientPolicy_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientPolicy_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientPolicy_clientId\"><label for=\"node-input-getNetworkClientPolicy_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientPolicy_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientPolicy_clientIdType\" value=\"string\" ></div>","example":"[\n  {\n    \"mac\": \"00:11:22:33:44:55\",\n    \"type\": \"Group policy\",\n    \"groupPolicyId\": \"101\"\n  }\n]","summary":"Return the policy assigned to a client on the network. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP."},{"methodGroup":"Clients","methodName":"updateNetworkClientPolicy","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"},{"camelCaseName":"updateNetworkClientPolicy"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"updateNetworkClientPolicy_networkId\"><label for=\"node-input-updateNetworkClientPolicy_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-updateNetworkClientPolicy_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-updateNetworkClientPolicy_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"updateNetworkClientPolicy_clientId\"><label for=\"node-input-updateNetworkClientPolicy_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-updateNetworkClientPolicy_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-updateNetworkClientPolicy_clientIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"updateNetworkClientPolicy_updateNetworkClientPolicy\"><label for=\"node-input-updateNetworkClientPolicy_updateNetworkClientPolicy\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>updateNetworkClientPolicy</b> <i>&nbsp</i></span></label><p></p><input type=\"text\" id=\"node-input-updateNetworkClientPolicy_updateNetworkClientPolicy\" placeholder=\"msg.updateNetworkClientPolicy\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-updateNetworkClientPolicy_updateNetworkClientPolicyType\" value=\"\" ></div>","example":"[\n  {\n    \"mac\": \"00:11:22:33:44:55\",\n    \"type\": \"Group policy\",\n    \"groupPolicyId\": \"101\"\n  }\n]","summary":"Update the policy assigned to a client on the network. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP."},{"methodGroup":"Clients","methodName":"getNetworkClientSplashAuthorizationStatus","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkClientSplashAuthorizationStatus_networkId\"><label for=\"node-input-getNetworkClientSplashAuthorizationStatus_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientSplashAuthorizationStatus_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientSplashAuthorizationStatus_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientSplashAuthorizationStatus_clientId\"><label for=\"node-input-getNetworkClientSplashAuthorizationStatus_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientSplashAuthorizationStatus_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientSplashAuthorizationStatus_clientIdType\" value=\"string\" ></div>","example":"[\n  {\n    \"ssids\": {\n      \"0\": {\n        \"isAuthorized\": true,\n        \"authorizedAt\": \"2017-07-19 16:24:13 UTC\",\n        \"expiresAt\": \"2017-07-20 16:24:13 UTC\"\n      },\n      \"2\": {\n        \"isAuthorized\": false\n      }\n    }\n  }\n]","summary":"Return the splash authorization for a client for each SSID theyve associated with through splash. Only enabled SSIDs with Click-through splash enabled will be included. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP."},{"methodGroup":"Clients","methodName":"updateNetworkClientSplashAuthorizationStatus","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"},{"camelCaseName":"updateNetworkClientSplashAuthorizationStatus"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"updateNetworkClientSplashAuthorizationStatus_networkId\"><label for=\"node-input-updateNetworkClientSplashAuthorizationStatus_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-updateNetworkClientSplashAuthorizationStatus_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-updateNetworkClientSplashAuthorizationStatus_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"updateNetworkClientSplashAuthorizationStatus_clientId\"><label for=\"node-input-updateNetworkClientSplashAuthorizationStatus_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-updateNetworkClientSplashAuthorizationStatus_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-updateNetworkClientSplashAuthorizationStatus_clientIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"updateNetworkClientSplashAuthorizationStatus_updateNetworkClientSplashAuthorizationStatus\"><label for=\"node-input-updateNetworkClientSplashAuthorizationStatus_updateNetworkClientSplashAuthorizationStatus\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>updateNetworkClientSplashAuthorizationStatus</b> <i>&nbsp</i></span></label><p></p><input type=\"text\" id=\"node-input-updateNetworkClientSplashAuthorizationStatus_updateNetworkClientSplashAuthorizationStatus\" placeholder=\"msg.updateNetworkClientSplashAuthorizationStatus\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-updateNetworkClientSplashAuthorizationStatus_updateNetworkClientSplashAuthorizationStatusType\" value=\"\" ></div>","example":"[\n  {\n    \"ssids\": {\n      \"0\": {\n        \"isAuthorized\": true,\n        \"authorizedAt\": \"2017-07-19 16:24:13 UTC\",\n        \"expiresAt\": \"2017-07-20 16:24:13 UTC\"\n      },\n      \"2\": {\n        \"isAuthorized\": false\n      }\n    }\n  }\n]","summary":"Update a clients splash authorization. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP."},{"methodGroup":"Clients","methodName":"getNetworkClientTrafficHistory","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"},{"camelCaseName":"perPage"},{"camelCaseName":"startingAfter"},{"camelCaseName":"endingBefore"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkClientTrafficHistory_networkId\"><label for=\"node-input-getNetworkClientTrafficHistory_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientTrafficHistory_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientTrafficHistory_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientTrafficHistory_clientId\"><label for=\"node-input-getNetworkClientTrafficHistory_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientTrafficHistory_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientTrafficHistory_clientIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientTrafficHistory_perPage\"><label for=\"node-input-getNetworkClientTrafficHistory_perPage\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>perPage</b> <i>&nbspinteger</i></span></label><p>The number of entries per page returned. Acceptable range is 3 - 1000.</p><input type=\"text\" id=\"node-input-getNetworkClientTrafficHistory_perPage\" placeholder=\"msg.perPage\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientTrafficHistory_perPageType\" value=\"integer\" ></div><div class=\"form-row\" id=\"getNetworkClientTrafficHistory_startingAfter\"><label for=\"node-input-getNetworkClientTrafficHistory_startingAfter\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>startingAfter</b> <i>&nbspstring</i></span></label><p>A token used by the server to indicate the start of the page. Often this is a timestamp or an ID but it is not limited to those. This parameter should not be defined by client applications. The link for the first, last, prev, or next page in the HTTP Link header should define it.</p><input type=\"text\" id=\"node-input-getNetworkClientTrafficHistory_startingAfter\" placeholder=\"msg.startingAfter\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientTrafficHistory_startingAfterType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientTrafficHistory_endingBefore\"><label for=\"node-input-getNetworkClientTrafficHistory_endingBefore\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>endingBefore</b> <i>&nbspstring</i></span></label><p>A token used by the server to indicate the end of the page. Often this is a timestamp or an ID but it is not limited to those. This parameter should not be defined by client applications. The link for the first, last, prev, or next page in the HTTP Link header should define it.</p><input type=\"text\" id=\"node-input-getNetworkClientTrafficHistory_endingBefore\" placeholder=\"msg.endingBefore\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientTrafficHistory_endingBeforeType\" value=\"string\" ></div>","example":"[\n  [\n    {\n      \"ts\": 1518365681,\n      \"application\": \"Google\",\n      \"destination\": \"www.google.com\",\n      \"protocol\": \"UDP\",\n      \"port\": 443,\n      \"recv\": 383,\n      \"sent\": 56,\n      \"numFlows\": 5,\n      \"activeSeconds\": 240\n    }\n  ]\n]","summary":"Return the clients network traffic data over time. Usage data is in kilobytes. This endpoint requires detailed traffic analysis to be enabled on the Network-wide > General page. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP."},{"methodGroup":"Clients","methodName":"getNetworkClientUsageHistory","parameters":[{"camelCaseName":"networkId"},{"camelCaseName":"clientId"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getNetworkClientUsageHistory_networkId\"><label for=\"node-input-getNetworkClientUsageHistory_networkId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>networkId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientUsageHistory_networkId\" placeholder=\"msg.networkId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientUsageHistory_networkIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getNetworkClientUsageHistory_clientId\"><label for=\"node-input-getNetworkClientUsageHistory_clientId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>clientId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getNetworkClientUsageHistory_clientId\" placeholder=\"msg.clientId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getNetworkClientUsageHistory_clientIdType\" value=\"string\" ></div>","example":"[\n  [\n    {\n      \"sent\": 500,\n      \"received\": 680,\n      \"ts\": 1518365681\n    }\n  ]\n]","summary":"Return the clients daily usage history. Usage data is in kilobytes. Clients can be identified by a client key or either the MAC or IP depending on whether the network uses Track-by-IP."}],"currentParams":[{"methodName":"getNetworkClientUsageHistory","camelCaseName":"networkId","type":"str","value":"L_577023702256850241"}],"storedParams":[{"methodName":"getNetworkClientUsageHistory","camelCaseName":"networkId","type":"str","value":"L_577023702256850241"}],"formHtml":"","method":"getNetworkClientUsageHistory","x":350,"y":400,"wires":[["ff62e9ed.d0e1f8"]]},{"id":"b5ec5e7e.2d60b","type":"mysql","z":"133fc443.48d31c","mydb":"52258174.c9c2c","name":"query","x":770,"y":560,"wires":[["e8e3d10.57c7d3","bd449a8e.b17fd8"]]},{"id":"e8e3d10.57c7d3","type":"debug","z":"133fc443.48d31c","name":"query output","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":940,"y":660,"wires":[]},{"id":"bd449a8e.b17fd8","type":"function","z":"133fc443.48d31c","name":"response","func":"count = 0;\nvar users = {};\nvar auth_id;\nvar email;\nvar user_name;\nvar created_at;\nvar account_type;\nvar authorized_zone;\nquery = \"\";\nmsg.topic = \"\";\n\nfunction pushToDict(obj) {\n    \n}\n\nfunction createObj(auth_id) {\n    users[auth_id] = {name:[], email:[], createdAt:[], accountType:[], authorizedZone:[], mac:[]};\n}\n\nquery += \"insert into users(AUTHORIZED_ID, EMAIL, USER_NAME, CREATED_AT, ACCOUNT_TYPE, AUTHORIZED_ZONE, MAC) values \";\nfor (i=0; i<msg.payload.length; i++) {\n    count += 1;\n    auth_id = msg.payload[i].AUTHORIZED_ID;\n    email = msg.payload[i].EMAIL;\n    user_name = msg.payload[i].USER_NAME;\n    created_at = msg.payload[i].CREATED_AT;\n    account_type = msg.payload[i].ACCOUNT_TYPE;\n    mac = msg.payload[i].MAC;\n    authorized_zone = msg.payload[i].AUTHORIZED_ZONE;\n    createObj(auth_id);\n    users[auth_id][\"name\"].push(user_name);\n    users[auth_id][\"email\"].push(email);\n    users[auth_id][\"createdAt\"].push(created_at);\n    users[auth_id][\"accountType\"].push(account_type);\n    users[auth_id][\"authorizedZone\"].push(authorized_zone);\n    users[auth_id][\"mac\"].push(mac);\n\n}\nfor (id in users) {\n    stringMac = \"\";\n    for (i=0; i<users[id][\"mac\"].length; i++) {\n        stringMac += users[id][\"mac\"][i];\n    }\n\tquery += \"('\"+id+\"','\"+users[id][\"email\"]+\"','\"+users[id][\"name\"]+\"','\"+users[id][\"createdAt\"]+\"','\"+users[id][\"accountType\"]+\"','\"+users[id][\"authorizedZone\"]+\"','\"+users[id][\"mac\"]+\"'),\";\n\n}\nquery = query.substring(0, query.length-1);\nmsg.topic = query;\n// msg.log = msg.payload[0].id;\n\nreturn msg;","outputs":1,"noerr":0,"x":940,"y":560,"wires":[["19e7e8d3.1cae47","7cf52fc0.8294f"]]},{"id":"7cf52fc0.8294f","type":"debug","z":"133fc443.48d31c","name":"user query response","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1160,"y":560,"wires":[]},{"id":"c558a862.b6d4b8","type":"switch","z":"133fc443.48d31c","name":"<0","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":530,"y":1640,"wires":[["1bc24ff1.f3676"]]},{"id":"16d265d0.9a363a","type":"debug","z":"133fc443.48d31c","name":"loop output","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":890,"y":1640,"wires":[]},{"id":"714d1a36.d01844","type":"inject","z":"133fc443.48d31c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":1640,"wires":[["a4a09604.a3bf58"]]},{"id":"a4a09604.a3bf58","type":"function","z":"133fc443.48d31c","name":"payload = 10","func":"msg.payload = 10;\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":1640,"wires":[["c558a862.b6d4b8"]]},{"id":"1bc24ff1.f3676","type":"function","z":"133fc443.48d31c","name":"-1","func":"msg.payload -=1;\nreturn msg;","outputs":1,"noerr":0,"x":690,"y":1640,"wires":[["16d265d0.9a363a","c558a862.b6d4b8"]]},{"id":"36992aae.a197a6","type":"debug","z":"133fc443.48d31c","name":"loop","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":610,"y":1720,"wires":[]},{"id":"402c1058.60df9","type":"debug","z":"133fc443.48d31c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":460,"y":1760,"wires":[]},{"id":"50708f4a.8047c","type":"inject","z":"133fc443.48d31c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":760,"wires":[["8d5b9d52.34d63"]]},{"id":"8d5b9d52.34d63","type":"function","z":"133fc443.48d31c","name":"client id query","func":"query = \"\";\nquery = \"select client_id from clients;\"\nmsg.topic = query;\nreturn msg;","outputs":1,"noerr":0,"x":300,"y":760,"wires":[["78664796.7fffe8"]]},{"id":"7d51aa86.374984","type":"switch","z":"133fc443.48d31c","name":"loop","property":"clientIdx","propertyType":"msg","rules":[{"t":"gte","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":250,"y":1040,"wires":[["9d677a14.2fba68","82120ded.c87d2"]]},{"id":"9d677a14.2fba68","type":"function","z":"133fc443.48d31c","name":"clientIdx-1","func":"msg.clientIdx -= 1;\nreturn msg;","outputs":1,"noerr":0,"x":420,"y":1040,"wires":[["e6fc0531.6eea18"]]},{"id":"d4d4b606.2d15f8","type":"debug","z":"133fc443.48d31c","name":"clients id","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":680,"y":760,"wires":[]},{"id":"78664796.7fffe8","type":"mysql","z":"133fc443.48d31c","mydb":"52258174.c9c2c","name":"","x":490,"y":760,"wires":[["d4d4b606.2d15f8","270ba9b8.9458f6"]]},{"id":"270ba9b8.9458f6","type":"function","z":"133fc443.48d31c","name":"payload initializer","func":"clientCount = msg.payload.length;\nmsg.clientCount = clientCount;\nmsg.clientIdx = clientCount-1;\nmsg.clients=msg.payload;\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":840,"wires":[["e6fc0531.6eea18"]]},{"id":"90b58871.ee5d48","type":"debug","z":"133fc443.48d31c","name":"debug","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"client","targetType":"msg","x":930,"y":800,"wires":[]},{"id":"e6fc0531.6eea18","type":"function","z":"133fc443.48d31c","name":"payload[clientIdx]","func":"client = msg.clients[msg.clientIdx].client_id;\n// msg.payload = {clientId: \"k91064c\"};\n// msg.payload.client = client;\n// msg.clientId = \"k91064c\";\n// msg.c = 23;\n// networkId = \"L_577023702256850241\";\n// Set Variables\n// var apiKey = global.get('apiKey');\nmsg.client=client\n\n\n// API Call\nmsg.headers = {\n    \"X-Cisco-Meraki-API-Key\": \"a642e5949aa7ec6c3834956084c409c926c861cb\"\n};\n\n// msg.url = \"https://dashboard.meraki.com/api/v0/organizations\";\nmsg.method = 'get';\n\nmsg.url = \"https://api.meraki.com/api/v0/networks/L_577023702256850241/clients/\"+client+\"/trafficHistory\";\n// msg.url = \"http://api.meraki.com/api/v0/networks/\"+networkId+\"/clients/\"+client+\"/trafficHistory\";\nreturn msg;","outputs":1,"noerr":0,"x":530,"y":840,"wires":[["90b58871.ee5d48","5aa5a53.43fff5c"]]},{"id":"82120ded.c87d2","type":"debug","z":"133fc443.48d31c","name":"client idx update","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":400,"y":1120,"wires":[]},{"id":"5eba8ce4.45b184","type":"function","z":"133fc443.48d31c","name":"parse data to json","func":"data = {};\n\nfunction createObj(application) {\n    data[application] = {recv:0, sent:0};\n}\n\nfor (i=0; i<msg.payload.length; i++) {\n    pkt = msg.payload[i];\n    createObj(pkt[\"application\"]);\n}\n\nfor (i=0; i<msg.payload.length; i++) {\n    pkt = msg.payload[i];\n    data[pkt[\"application\"]][\"recv\"] += pkt[\"recv\"];\n    data[pkt[\"application\"]][\"sent\"] += pkt[\"sent\"];\n    // msg.test += parseInt(pkt[\"recv\"]);\n}\n\n\n\n// msg.test = data[\"Google HTTPS\"][\"sent\"];\nmsg.dataOutput = JSON.stringify(data);\nmsg.data = data;\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":920,"wires":[["e5c2b8ab.4fc328","a3653205.cf8c","9d2883.e256978","7d51aa86.374984"]]},{"id":"e5c2b8ab.4fc328","type":"debug","z":"133fc443.48d31c","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"dataOutput","targetType":"msg","x":760,"y":920,"wires":[]},{"id":"a3653205.cf8c","type":"debug","z":"133fc443.48d31c","name":"client","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"data","targetType":"msg","x":730,"y":980,"wires":[]},{"id":"5aa5a53.43fff5c","type":"http request","z":"133fc443.48d31c","name":"out","method":"use","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":770,"y":840,"wires":[["806e43c7.043bf","5eba8ce4.45b184"]]},{"id":"806e43c7.043bf","type":"debug","z":"133fc443.48d31c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1010,"y":880,"wires":[]},{"id":"9d2883.e256978","type":"function","z":"133fc443.48d31c","name":"insert application query","func":"clientId = msg.client;\ndata = msg.dataOutput;\ndate = Date().toString();\nmsg.topic = 'insert into APPLICATION2(CLIENT_ID, APP_DATA, TIME_STAMP) values (?, ?, ?);';\nmsg.payload = [clientId, data, date];\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":1060,"wires":[["bba63221.99276","cfee2ed7.1f751"]]},{"id":"cfee2ed7.1f751","type":"mysql","z":"133fc443.48d31c","mydb":"52258174.c9c2c","name":"app","x":850,"y":1180,"wires":[["d73f2e99.00faf"]]},{"id":"bba63221.99276","type":"debug","z":"133fc443.48d31c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":950,"y":1060,"wires":[]},{"id":"d73f2e99.00faf","type":"debug","z":"133fc443.48d31c","name":"dblog--","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1010,"y":1180,"wires":[]},{"id":"2e14b797.3c36a8","type":"function","z":"133fc443.48d31c","name":"","func":"id = 111111;\ndata = [{\"data\" : \"23\"}];\nmsg.topic = 'insert into test(ID) values ('+data+');';\nmsg.payload = data;\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":1200,"wires":[[]]},{"id":"d294858a.51d218","type":"inject","z":"133fc443.48d31c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":460,"y":1200,"wires":[["2e14b797.3c36a8"]]},{"id":"ed94e43b.999a98","type":"Meraki CMX","z":"cb5e94b6.8304e8","name":"","url":"/scanning","settings":"2c3b286c.038d18","radioType":"All","x":220,"y":120,"wires":[["e4cb565a.3a1c38","8a893c53.61e8d"],["f7331ff0.835e5"]]},{"id":"f7331ff0.835e5","type":"debug","z":"cb5e94b6.8304e8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":410,"y":180,"wires":[]},{"id":"e4cb565a.3a1c38","type":"function","z":"cb5e94b6.8304e8","name":"catching location data","func":"clientId = msg.client;\ndata = msg.dataOutput;\ndate = new Date();\nd =date.getDate()+'/'+(date.getMonth()+1)+'/'+date.getFullYear();\nminutes = new Date();\nobservations = msg.payload.data.observations;\napMac = msg.payload.data.apMac;\n// query = '';\n// objList = [];\n// query = 'insert into LOCATION4(MAC, AP, START_TIME, END_TIME, DATE) values ';\nmsg.topic = '';\nfor ( i in observations ) {\n    start_time = observations[i][\"seenTime\"];\n    end_time = observations[i][\"seenTime\"];\n    clientMac = observations[i][\"clientMac\"];\n    // query += '(?, ?, ?, ?, ?),';\n    // msg.topic += 'insert into LOCATION4(MAC, AP, START_TIME, END_TIME, DATE) values (\"'+clientMac+'\",\"'+apMac+'\",\"'+start_time+'\",\"'+end_time+'\",\"'+date+'\"); ';\n    msg.topic += 'select i_dt(\"'+clientMac+'\",\"'+apMac+'\",\"'+d+'\"); ';\n    // objList.push((clientMac, apMac, observations[i][\"seenTime\"], observations[i][\"seenTime\"], date));\n}\n// query = query.substring(0, query.length - 1);\n// query += ';';\n// msg.topic = query;\n// msg.payload = objList;\nreturn msg;","outputs":1,"noerr":0,"x":600,"y":120,"wires":[["5e0a4f9e.edb75"]]},{"id":"5e0a4f9e.edb75","type":"mysql","z":"cb5e94b6.8304e8","mydb":"52258174.c9c2c","name":"db","x":810,"y":120,"wires":[["487e920a.bad91c"]]},{"id":"487e920a.bad91c","type":"debug","z":"cb5e94b6.8304e8","name":"db log","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":940,"y":120,"wires":[]},{"id":"8a893c53.61e8d","type":"debug","z":"cb5e94b6.8304e8","name":"scanning","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":400,"y":60,"wires":[]},{"id":"4b12c6a8.a3d3c8","type":"function","z":"89b2c70b.5de378","name":"options","func":"msg.options = [\"Starting from this month\", \"Last Week\", \"Today\", \"For last day\", \"For last 2 Hours\"];\nc = msg.payload.description.split(\"<id>\");\nclientId = c[1];\nflow.set(\"clientId\", clientId);\nflow.set(\"options\", msg.options);\nmsg.payload = clientId;\nreturn msg;","outputs":1,"noerr":0,"x":1020,"y":400,"wires":[["83350847.7add08"]]},{"id":"a04fd86a.a40bd8","type":"ui_list","z":"89b2c70b.5de378","group":"ae85ae9d.ae9a7","name":"Clients List","order":5,"width":"9","height":"18","lineType":"three","actionType":"click","allowHTML":true,"outputs":1,"topic":"","x":830,"y":400,"wires":[["b640146b.4d74e8","4b12c6a8.a3d3c8"]]},{"id":"8d10c940.48fcf8","type":"function","z":"89b2c70b.5de378","name":"clients","func":"msg.topic = 'select * from clients2;';\nreturn msg;","outputs":1,"noerr":0,"x":90,"y":560,"wires":[["e50d4390.bf7b5"]]},{"id":"e50d4390.bf7b5","type":"mysql","z":"89b2c70b.5de378","mydb":"52258174.c9c2c","name":"get client data","x":260,"y":560,"wires":[["553c727a.ee5d4c"]]},{"id":"553c727a.ee5d4c","type":"function","z":"89b2c70b.5de378","name":"show client data","func":"data = msg.payload;\nclients = [];\ncount =0;\nfor (i in data) {\n    count++;\n    // if(data[i].CLIENT_ID==\"k91064c\") {\n    clients.push({title : data[i].DESCRIPTION, \n    description : \"<div><h4>\"+data[i].USER_NAME+\"</h4><h4>\"+data[i].MAC+\"</h4><h4>\"+data[i].CLIENT_ID+\"</h4></div><br>\",\n    icon : 'https://cdn2.iconfinder.com/data/icons/user-icon-2-1/100/user_5-15-512.png'\n    })\n    // if (count==15)\n        // break;\n    // }\n}\nmsg.payload = clients;\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":560,"wires":[[]]},{"id":"d22ad6c4.655368","type":"inject","z":"89b2c70b.5de378","name":"","topic":"","payload":"","payloadType":"date","repeat":"3600","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":400,"wires":[["42a32eb0.2dafd","fbab4417.3c12f8"]]},{"id":"83350847.7add08","type":"ui_dropdown","z":"89b2c70b.5de378","name":"","label":"","tooltip":"","place":"For last day","group":"8dab460c.cb4e88","order":1,"width":"5","height":"1","passthru":true,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"","x":1160,"y":400,"wires":[["75a3e005.3cd2c"]]},{"id":"8a1abb40.df0508","type":"comment","z":"89b2c70b.5de378","name":"Clients","info":"","x":90,"y":320,"wires":[]},{"id":"902ff5a0.a18208","type":"comment","z":"89b2c70b.5de378","name":"Data Usag Graph","info":"","x":2420,"y":600,"wires":[]},{"id":"75a3e005.3cd2c","type":"function","z":"89b2c70b.5de378","name":"set dropdown value","func":"dropdownVal = msg.payload;\n// [\"Starting from this month\", \"Last Week\", \"Today\", \"For last day\", \"For last 2 Hours\"];\noptions = flow.get(\"options\");\nstartTime = flow.get(\"startTime\"); //Math.round(flow.get(\"startTime\")/1000);\nendTime = Date.now();\ntoday = new Date();\nif (dropdownVal == options[0]){\n    timespan = Math.round((endTime-startTime)/1000);\n} else if(dropdownVal == options[1]) {\n    timespan = (7*24*60*60);\n}  else if(dropdownVal == options[2]) {\n    timespan = (1*today.getHours()*today.getMinutes()*60);\n}  else if(dropdownVal == options[3]) {\n    timespan = (1*24*60*60)+(1*today.getHours()*today.getMinutes()*60);\n}  else if(dropdownVal == options[4]) {\n    timespan = (1*2*60*60);\n} else {\n    timespan = (1*24*60*60);\n}\nflow.set(\"timespan\", timespan);\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":400,"wires":[["db2a2773.4a7198"]]},{"id":"1adde966.c5dcd7","type":"function","z":"89b2c70b.5de378","name":"graph====>","func":"function bytesToSize(bytes) {\n   var sizes = ['KB', 'MB', 'GB', 'TB'];\n   if (bytes == 0) return '0 Byte';\n   var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n   return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];\n}\n\nobj = msg.graphData;\nclientId = obj.id;\nsent = obj.usage.sent;\nrecv = obj.usage.recv;\ntotal = sent+recv;\nsentData = bytesToSize(sent);\nrecvData = bytesToSize(recv);\ntotalData = bytesToSize(total);\nmsg.payload = [sentData, recvData, totalData, total, obj];\n\nvar sentMsg = {};\nvar recvMsg = {};\nsentMsg.payload = sentData.split(\" \")[0];\nsentMsg.topic = \"Sent Data (\"+sentData.split(\" \")[1]+\")\";\nrecvMsg.payload = recvData.split(\" \")[0];\nrecvMsg.topic = \"Recieve Data (\"+recvData.split(\" \")[1]+\")\";\nmsg.payload =   [\n        {\n            \"series\": [ sentMsg.topic, recvMsg.topic ],\n            \"data\": [\n                [ sentMsg.payload, recvMsg.payload ]\n            ],\n            \"labels\": [ sentMsg.topic, recvMsg.topic ]\n        }\n    ];\nreturn msg;","outputs":1,"noerr":0,"x":2410,"y":660,"wires":[["5312f94e.be0d18"]]},{"id":"ac7da5f1.3f2808","type":"function","z":"89b2c70b.5de378","name":"","func":"// msg.topic = \"select * from APPLICATION;\";\n// var oneObj = 0;\n\n// if(msg.payload.length > 1) {\n//     oneObj = 2;\n// }else if(msg.payload.length == 1) {\n//     oneObj = 1;\n// }else {\n//     oneObj = 1;\n// }\n\n// var clientId;\n// if(oneObj == 1) {\n//     clientId =  flow.get(\"clientId\");//msg.payload.description.split(\"\\n\")[2];\n//     msg.topic = \"select * from APPLICATION where client_id = '\"+clientId+\"';\";\n// } else if(oneObj == 2) {\n//     clientId =  flow.get(\"clientId\");//msg.payload[0].description.split(\"\\n\")[2];\n//     msg.topic = \"select * from APPLICATION where client_id = '\"+clientId+\"';\";\n// } else {\n    \n// }\n// msg.oneObj = msg.payload.length;\n\nclientId =  flow.get(\"clientId\");\nmsg.headers = {\n    \"X-Cisco-Meraki-API-Key\": global.get(\"X-Cisco-Meraki-API-Key\")\n};\nmsg.method = 'get';\nmsg.url = global.get(\"baseURL\")+\"networks/\"+global.get(\"networkId\")+\"/clients/\"+clientId+\"/trafficHistory?timespan=\"+flow.get(\"timespan\");\n\nreturn msg;","outputs":1,"noerr":0,"x":2410,"y":840,"wires":[["2d5dd41c.fa1a4c"]]},{"id":"387cd688.e220ba","type":"ui_list","z":"89b2c70b.5de378","d":true,"group":"5854f2f6.4e70fc","name":"","order":1,"width":"6","height":"15","lineType":"two","actionType":"none","allowHTML":false,"outputs":0,"topic":"","x":2930,"y":840,"wires":[]},{"id":"a19407a5.7523d8","type":"function","z":"2e3c4299.0d122e","name":"","func":"msg.topic = 'select MAC, AP, DWELL_TIME from LOCATION1';\nreturn msg;","outputs":1,"noerr":0,"x":340,"y":180,"wires":[["64b66acf.1d82c4"]]},{"id":"20759831.215da8","type":"inject","z":"2e3c4299.0d122e","name":"","topic":"","payload":"","payloadType":"date","repeat":"60","crontab":"","once":false,"onceDelay":0.1,"x":190,"y":180,"wires":[["a19407a5.7523d8"]]},{"id":"64b66acf.1d82c4","type":"mysql","z":"2e3c4299.0d122e","mydb":"52258174.c9c2c","name":"DB","x":510,"y":180,"wires":[["fc60ede8.187a8","2116a223.3f66be"]]},{"id":"fc60ede8.187a8","type":"debug","z":"2e3c4299.0d122e","name":"table--log","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":840,"y":240,"wires":[]},{"id":"1123627d.3c817e","type":"comment","z":"133fc443.48d31c","name":"Settings","info":"","x":1600,"y":80,"wires":[]},{"id":"5a6d581a.0b07c8","type":"function","z":"133fc443.48d31c","name":"","func":"global.set(\"X-Cisco-Meraki-API-Key\", \"a642e5949aa7ec6c3834956084c409c926c861cb\");\nglobal.set(\"baseURL\", \"https://api.meraki.com/api/v0/\");\nglobal.set(\"networkId\", \"L_577023702256850241\");\nreturn msg;","outputs":1,"noerr":0,"x":1760,"y":140,"wires":[[]]},{"id":"2f3ca4dd.b36c5c","type":"inject","z":"133fc443.48d31c","name":"","topic":"","payload":"","payloadType":"date","repeat":"3600","crontab":"","once":false,"onceDelay":0.1,"x":1600,"y":140,"wires":[["5a6d581a.0b07c8"]]},{"id":"2116a223.3f66be","type":"ui_table","z":"2e3c4299.0d122e","group":"a4ddeb7f.6391a8","name":"","order":0,"width":"35","height":"30","columns":[],"outputs":0,"cts":false,"x":710,"y":180,"wires":[]},{"id":"6ba9ca17.32a9f4","type":"function","z":"89b2c70b.5de378","name":"1","func":"clientId =  flow.get(\"clientId\");//msg.payload.description.split(\"\\n\")[2];\ncurrentTime = Date.now();\nstartTime = flow.get(\"startTime\");\ntimespan = flow.get(\"timespan\");\nmsg.headers = {\n    \"X-Cisco-Meraki-API-Key\": global.get(\"X-Cisco-Meraki-API-Key\")\n};\nmsg.method = 'get';\nmsg.url = global.get(\"baseURL\")+\"networks/\"+global.get(\"networkId\")+\"/clients?timespan=\"+timespan+\"&perPage=1000\";\nmsg.clientId = flow.get(\"clientId\");\nmsg.timespan = timespan;\nreturn msg;","outputs":1,"noerr":0,"x":1850,"y":160,"wires":[["18af2c48.4d39b4"]]},{"id":"18af2c48.4d39b4","type":"http request","z":"89b2c70b.5de378","name":"getClientsData","method":"use","ret":"txt","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":2020,"y":160,"wires":[["49ef60a7.83b72"]]},{"id":"49ef60a7.83b72","type":"function","z":"89b2c70b.5de378","name":"2","func":"data = JSON.parse(msg.payload);\nthreshhold  = global.get(\"usageLimit\");\nclientId = flow.get(\"clientId\");\nclientUsage = 0;\nclientUsageData = {sent : 0, recv : 0};\ngetClient = null;\ncolor =\"color:MediumSeaGreen;\";\nfor (i in data) {\n    client = data[i];\n    if(client.id === clientId) {\n        clientUsageData = {sent : client.usage.sent, recv : client.usage.recv};\n        clientUsage = client.usage.sent+client.usage.recv;\n        getClient = client;\n        if(client.status == \"Online\")\n            color = \"color:MediumSeaGreen;\";\n        else \n            color = \"color:Tomato;\";\n    }\n}\nflow.set(\"user\",getClient.user);\nflow.set(\"mac\",getClient.mac);\nmsg.data = data;\nmsg.payload = clientUsage;\nmsg.clientUsageData = clientUsageData;\nmsg.graphData = getClient;\nmsg.left = \"font-size:16px; font-weight:bold;\";\nmsg.right = \"font-size:14px;\";// font-weight:bold;\";\nmsg.color = color+\" \"+msg.right;\nreturn msg;","outputs":1,"noerr":0,"x":2200,"y":160,"wires":[["e3afc950.e88df8","5f551e68.8be16","1adde966.c5dcd7","c62f4380.e5a6e"]]},{"id":"e3afc950.e88df8","type":"function","z":"89b2c70b.5de378","name":"3","func":"\nfunction bytesToSize(bytes) {\n   var sizes = ['KB', 'MB', 'GB', 'TB'];\n   if (bytes == 0) return '0 Byte';\n   var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n   return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];\n}\n\nvalue = bytesToSize(msg.payload);\nmsg.payload = value.split(\" \")[0];\n// msg.ui_control.options.label = \"KB\";\nmsg.units = value.split(\" \")[1];\nif(msg.units == \"KB\"){\n    msg.ui_control = {\"min\":0,\"max\":1000};    \n}\nelse if(msg.units == \"MB\"){\n    msg.ui_control = {\"min\":0,\"max\":1000};    \n}\nelse if(msg.units == \"GB\"){\n    msg.ui_control = {\"min\":0,\"max\":10};    \n}\nelse if(msg.units == \"TB\"){\n    msg.ui_control = {\"min\":0,\"max\":1};    \n}\n\nreturn msg;","outputs":1,"noerr":0,"x":2550,"y":180,"wires":[["483133c5.9b6d1c"]]},{"id":"483133c5.9b6d1c","type":"ui_gauge","z":"89b2c70b.5de378","name":"Total Data ","group":"8dab460c.cb4e88","order":5,"width":0,"height":0,"gtype":"gage","title":"Data Usage","label":"{{msg.units}}","format":"{{msg.payload}}","min":0,"max":10,"colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":2720,"y":180,"wires":[]},{"id":"a900c768.f87cf8","type":"comment","z":"89b2c70b.5de378","name":"Settings ","info":"","x":90,"y":40,"wires":[]},{"id":"8c2e27d6.82e7a8","type":"function","z":"89b2c70b.5de378","name":"","func":"flow.set(\"timespan\", \"3600\");\nflow.set(\"startTime\",1577836800000);\nflow.set(\"nodeRedPwd\", \"vmtvgbiyuxentsol\");\nflow.set(\"threshold\", 0);\nflow.set(\"options\", [\"Starting from this month\", \"Last Week\", \"Today\", \"For last day\", \"For last 2 Hours\"]);\nglobal.set(\"webex\", 1);\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":100,"wires":[[]]},{"id":"642c7fea.25d82","type":"inject","z":"89b2c70b.5de378","name":"","topic":"","payload":"","payloadType":"date","repeat":"3600","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":100,"wires":[["8c2e27d6.82e7a8"]]},{"id":"ab77e821.c14918","type":"function","z":"eaccbe40.a5df5","name":"","func":"query = \"select * from APPLICATION\";\nmsg.topic = query;\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":360,"wires":[["87a01464.91dc38"]]},{"id":"1edb18bf.a20137","type":"function","z":"eaccbe40.a5df5","name":"parsing recvData","func":"reqData = msg.payload;\nsize = reqData.length;\n// jsonData = clientId :\"\";\ntotalData = 0;\n\ndataArray = [];\n\nfor (i=0; i<size; i++) {\n    // jsonData.push(reqData[i][\"APP_DATA\"]);\n    dataJson = JSON.parse(reqData[i][\"APP_DATA\"]);\n    for (j in dataJson) {\n        totalData += dataJson[j][\"recv\"];\n    }\n    dataArray.push({clientId: reqData[i][\"CLIENT_ID\"], data:totalData});\n}\nclients = [];\nfor ( i in dataArray ) {\n    clients.push(dataArray[i][\"clientId\"]);\n}\n\nmsg.clientsCount = clients.length;\nmsg.options = clients;\nmsg.clients = clients;\nmsg.recvData = totalData;\n\nmsg.port = 1;\n\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":360,"wires":[["c0d95250.e2d19"]]},{"id":"87a01464.91dc38","type":"mysql","z":"eaccbe40.a5df5","mydb":"52258174.c9c2c","name":"App DB","x":600,"y":360,"wires":[["1edb18bf.a20137"]]},{"id":"de11bee4.0aeb4","type":"inject","z":"eaccbe40.a5df5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":"1","x":220,"y":360,"wires":[["ab77e821.c14918"]]},{"id":"8a79a7a5.853f18","type":"debug","z":"eaccbe40.a5df5","name":"CLients","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":920,"y":240,"wires":[]},{"id":"f84af158.4d392","type":"debug","z":"eaccbe40.a5df5","name":"dropdown log","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":860,"y":460,"wires":[]},{"id":"c0d95250.e2d19","type":"function","z":"eaccbe40.a5df5","name":"clients","func":"data = msg.clients;\n// clients = [];\n// for (i in data) {\n//     clients.push({title: data})\n// }\nmsg.payload = data;\nmsg.topic = 'select * from clients;'\nreturn msg;","outputs":1,"noerr":0,"x":530,"y":180,"wires":[["f1c362e6.0d52b"]]},{"id":"f1c362e6.0d52b","type":"mysql","z":"eaccbe40.a5df5","mydb":"52258174.c9c2c","name":"get client data","x":700,"y":180,"wires":[["a6e55b30.5800f8"]]},{"id":"a6e55b30.5800f8","type":"function","z":"eaccbe40.a5df5","name":"show client data","func":"data = msg.payload;\nclients = [];\nfor (i in data) {\n    clients.push({title : data[i].DESCRIPTION, \n    description : data[i].USER_NAME+\"\\n\"+data[i].MAC+\"\\n\"+data[i].CLIENT_ID+\"\\n\\n\",\n    icon : 'https://cdn2.iconfinder.com/data/icons/user-icon-2-1/100/user_5-15-512.png'\n    })\n}\nmsg.payload = clients;\nreturn msg;","outputs":1,"noerr":0,"x":940,"y":180,"wires":[["8a79a7a5.853f18"]]},{"id":"db425d18.ed5c7","type":"debug","z":"eaccbe40.a5df5","name":"List Output","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1330,"y":100,"wires":[]},{"id":"ab99fbac.d1ecf8","type":"function","z":"eaccbe40.a5df5","name":"","func":"data = msg.payload;\ndescription = data.description.split(\"\\n\");\nclientId = description[2];\nclientName = description[0];\nmac = description[1];\nicon = data.icon;\nmsg.client = msg.payload;\nmsg.topic = 'select a.APP_DATA from APPLICATION as a inner join clients as c on a.CLIENT_ID = c.CLIENT_ID and c.CLIENT_ID = \"'+clientId+'\";';\nreturn msg;","outputs":1,"noerr":0,"x":1310,"y":180,"wires":[["cb6e9177.9eb07"]]},{"id":"cb6e9177.9eb07","type":"mysql","z":"eaccbe40.a5df5","mydb":"52258174.c9c2c","name":"client app data","x":1490,"y":180,"wires":[["fe760df.108d2f","db425d18.ed5c7"]]},{"id":"fe760df.108d2f","type":"function","z":"eaccbe40.a5df5","name":"","func":"data = JSON.parse(msg.payload[0].APP_DATA);\nclients = [];\nfor (i in data) {\n    appName = data[i];\n    recv = appName.recv;\n    sent = appName.sent;\n    clients.push({title : appName, \n    description : \"Receive Data : \"+recv+\"\\n\"+\"Sent Data : \"+sent+\"\\n\\n\",\n    icon : 'https://cdn2.iconfinder.com/data/icons/user-icon-2-1/100/user_5-15-512.png',\n    menu : [\"recieve data : \"+recv, \"sent data : \"+sent]\n    });\n    clients.push(recv);\n}\nmsg.payload = clients;\n// msg.payload = data;\nreturn msg;","outputs":1,"noerr":0,"x":1670,"y":180,"wires":[["1545b1a4.82fede"]]},{"id":"1545b1a4.82fede","type":"debug","z":"eaccbe40.a5df5","name":"final output","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1830,"y":180,"wires":[]},{"id":"a54d4929.2be388","type":"debug","z":"eaccbe40.a5df5","name":"Client List Output","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1350,"y":260,"wires":[]},{"id":"ad9b1e59.bf444","type":"comment","z":"eaccbe40.a5df5","name":"Group1","info":"","x":210,"y":140,"wires":[]},{"id":"3350f040.5d1f1","type":"inject","z":"eaccbe40.a5df5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":"1","x":320,"y":640,"wires":[["a6509b3d.e14268"]]},{"id":"a6509b3d.e14268","type":"function","z":"eaccbe40.a5df5","name":"","func":"msg.l = [1,2,1,2,1,2,1,2];\nmsg.length = msg.l.length;\nmsg.payload = msg.l[msg.length-1];\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":640,"wires":[["870330c8.405d3"]]},{"id":"42b069b0.1ddf98","type":"debug","z":"eaccbe40.a5df5","name":"chart log","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1020,"y":640,"wires":[]},{"id":"870330c8.405d3","type":"switch","z":"eaccbe40.a5df5","name":"","property":"length","propertyType":"msg","rules":[{"t":"gte","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":670,"y":640,"wires":[[]]},{"id":"6734188.7a80de8","type":"function","z":"eaccbe40.a5df5","name":"length --","func":"msg.length -=1;\nmsg.payload = msg.l[msg.length-1];\nreturn msg;","outputs":1,"noerr":0,"x":840,"y":760,"wires":[[]]},{"id":"4cc5ed9c.1ef2d4","type":"trigger","z":"eaccbe40.a5df5","op1":"","op2":"","op1type":"pay","op2type":"payl","duration":"1","extend":false,"units":"s","reset":"","bytopic":"all","name":"","x":700,"y":700,"wires":[["870330c8.405d3"]]},{"id":"faf4e9bc.af2958","type":"comment","z":"89b2c70b.5de378","name":"Usage","info":"","x":1850,"y":80,"wires":[]},{"id":"41ee827.32bdc7c","type":"function","z":"eaccbe40.a5df5","name":"Vaibhav mobile","func":"msg.payload= {\n    \n    \n//     body : {\n        \n//   \"devicePolicy\": \"Group policy\",\n//   \"groupPolicyId\": 101,\n//   \"name\": \"vaibhav iPhone\"\n\n//     }\n// body : {\n\t\"mac\":\"04:b1:67:de:e7:1b\",\n\t\"devicePolicy\":\"Group policy\",\n\t\"groupPolicyId\":\"101\",\n\t\"name\":\"vaibhav's phone\"\n// }\n};\nreturn msg;","outputs":1,"noerr":0,"x":700,"y":80,"wires":[[]]},{"id":"bca5c51d.536b28","type":"function","z":"5579c0a7.6f2f3","name":"Vaibhav mobile","func":"msg.payload= {\n    \n    \n//     body : {\n        \n//   \"devicePolicy\": \"Group policy\",\n//   \"groupPolicyId\": 101,\n//   \"name\": \"vaibhav iPhone\"\n\n//     }\n// body : {\n\t\"mac\":\"04:b1:67:de:e7:1b\",\n\t\"devicePolicy\":\"Group policy\",\n\t\"groupPolicyId\":\"101\",\n\t\"name\":\"vaibhav's phone\"\n// }\n};\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":260,"wires":[[]]},{"id":"5f551e68.8be16","type":"function","z":"89b2c70b.5de378","name":"Policy Check","func":"clientTotalUsage = msg.payload;\n\nfunction bytesToSize(bytes) {\n   var sizes = ['KB', 'MB', 'GB', 'TB'];\n   if (bytes == 0) return '0 Byte';\n   var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n  return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];\n}\n\nwarning = \"Client is below threshold\";\nif(clientTotalUsage >= flow.get(\"threshold\")) {\n    warning = \"Client Limit Exceded\";\n    flow.set(\"send\",1);\n}\nmessage = \"<div><p>Client Usage : \"+bytesToSize(clientTotalUsage)+\"</p><br><p>\"+warning+\"</p></div>\";\n// message = \"Client Usage : \"+bytesToSize(clientTotalUsage)+\"\\n\"+warning;\n\nmsg.warning = message;\nmsg.policyCheck = warning;\nmsg.graphData = msg.graphData;\nreturn msg;","outputs":1,"noerr":0,"x":3070,"y":100,"wires":[["b63a92fc.3fcdb","a1ae8389.ab3d6","82a527e1.ddb338"]]},{"id":"b63a92fc.3fcdb","type":"ui_text","z":"89b2c70b.5de378","group":"8dab460c.cb4e88","order":6,"width":0,"height":0,"name":"Warning","label":"","format":"{{msg.warning}}","layout":"col-center","x":3300,"y":40,"wires":[]},{"id":"a1ae8389.ab3d6","type":"ui_button","z":"89b2c70b.5de378","name":"","group":"8dab460c.cb4e88","order":8,"width":"3","height":"1","passthru":false,"label":"Send Alert","tooltip":"","color":"","bgcolor":"#f54242","icon":"","payload":"","payloadType":"str","topic":"","x":3310,"y":160,"wires":[["3d3dcfeb.97a3d","3f47f905.506ec6"]]},{"id":"6495f6da.8490b8","type":"function","z":"89b2c70b.5de378","name":"","func":"msg.headers = {\n    \"X-Cisco-Meraki-API-Key\": global.get(\"X-Cisco-Meraki-API-Key\")\n};\nmsg.method = 'get';\n// msg.url = global.get(\"baseURL\")+\"networks/\"+global.get(\"networkId\")+\"/clients/provision\";\n\nmsg.payload = {\n    // body : {\n    // \t\"mac\": msg.mac,\n    // \t\"devicePolicy\":\"Group policy\",\n    // \t\"groupPolicyId\":\"101\",\n    // \t\"name\": msg.name\n    // }    \n}\n\nreturn msg;","outputs":1,"noerr":0,"x":3810,"y":240,"wires":[["f6c1c48.6420238"]]},{"id":"f6c1c48.6420238","type":"http request","z":"89b2c70b.5de378","name":"","method":"use","ret":"txt","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":3970,"y":240,"wires":[[]]},{"id":"dc08d7c6.3524f8","type":"comment","z":"89b2c70b.5de378","name":"Policy Push","info":"","x":3070,"y":40,"wires":[]},{"id":"2c5bd55b.df971a","type":"function","z":"89b2c70b.5de378","name":"","func":"client = msg.client;\nmsg.mac = client.mac;\nmsg.name = client.description;\nreturn msg;","outputs":1,"noerr":0,"x":3650,"y":240,"wires":[["6495f6da.8490b8"]]},{"id":"3d3dcfeb.97a3d","type":"function","z":"89b2c70b.5de378","name":"","func":"msg.topic = \"Usage Alert\";\nmsg.payload = flow.get(\"user\")+\" with mac \"+flow.get(\"mac\")+\" has reached the data limit!!!\";\nmsg.to = \"vaibhavkashyap2016@gmail.com\";\nreturn msg;","outputs":1,"noerr":0,"x":3650,"y":40,"wires":[["71dc1db6.679a84","d432bd7d.8a43f"]]},{"id":"71dc1db6.679a84","type":"e-mail","z":"89b2c70b.5de378","server":"smtp.gmail.com","port":"465","secure":true,"tls":false,"name":"vaibhavkashyap2016@gmail.com","dname":"","x":3880,"y":40,"wires":[]},{"id":"82a527e1.ddb338","type":"ui_template","z":"89b2c70b.5de378","group":"8dab460c.cb4e88","name":"","order":14,"width":"10","height":"7","format":"<div className=\"client\" text-align=\"left\" >\n<client text-align=\"center\">\n    <name><p><span style={{msg.left}}>User   :</span><span style={{msg.right}}>{{msg.graphData.user}}</span></p></name><br>  \n    <!--<description><p>{{msg.graphData.description}}</p></description>-->\n    <mac><p><span style={{msg.left}}>MAC   :</span><span style={{msg.right}}>{{msg.graphData.mac}}</span></p></mac><br>\n    <os><p><span style={{msg.left}}>OS   :</span><span style={{msg.right}}>{{msg.graphData.os}}</span></p></os><br>\n    <status><p><span style={{msg.left}}>Status   :</span><span style={{msg.color}}>{{msg.graphData.status}}</span></p></status><br>\n    <ip><p><span style={{msg.left}}>IP   :</span><span style={{msg.right}}>{{msg.graphData.ip}}</span></p></ip><br>\n    <!--<os><p>{{msg.graphData.os}}</p></os>-->\n    <ssid><p><span style={{msg.left}}>SSID   :</span><span style={{msg.right}}>{{msg.graphData.ssid}}</span></p></ssid><br>\n    <device><p><span style={{msg.left}}>Access point   : </span><span style={{msg.right}}>{{msg.graphData.recentDeviceName}}</span></p></device><br>\n    <policy><h3>{{msg.policy}}</h3></policy>\n</client>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":3360,"y":300,"wires":[["33f1a463.2d297c"]]},{"id":"2d5dd41c.fa1a4c","type":"http request","z":"89b2c70b.5de378","name":"","method":"use","ret":"txt","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":2570,"y":840,"wires":[["93802d85.5fcd","610ad64a.719eb8"]]},{"id":"3c33b52f.b10b5a","type":"comment","z":"89b2c70b.5de378","name":"Usage History","info":"","x":830,"y":660,"wires":[]},{"id":"45811969.21ce08","type":"inject","z":"89b2c70b.5de378","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":840,"y":760,"wires":[["b640146b.4d74e8"]]},{"id":"b640146b.4d74e8","type":"function","z":"89b2c70b.5de378","name":"","func":"clientId = msg.payload.description.split(\"\\n\")[2];\nmsg.headers = {\n    \"X-Cisco-Meraki-API-Key\": global.get(\"X-Cisco-Meraki-API-Key\")\n};\nmsg.method = 'get';\nmsg.url = global.get(\"baseURL\")+\"networks/\"+global.get(\"networkId\")+\"/clients/\"+clientId+\"/usageHistory\";\n\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":760,"wires":[["92a3b8c3.32f458"]]},{"id":"92a3b8c3.32f458","type":"http request","z":"89b2c70b.5de378","name":"","method":"GET","ret":"txt","paytoqs":false,"url":"","persist":false,"authType":"","x":1230,"y":760,"wires":[["f2e70229.725be"]]},{"id":"f2e70229.725be","type":"function","z":"89b2c70b.5de378","name":"","func":"data = JSON.parse(msg.payload);\n// startingbefore\nfor (i in data) {\n    \n}\nmsg.payload = data;\nreturn msg;","outputs":1,"noerr":0,"x":1390,"y":760,"wires":[[]]},{"id":"93802d85.5fcd","type":"function","z":"89b2c70b.5de378","name":"","func":"// data = msg.payload;\nmaxTotal = 0;\ntotalData = new Set();\ndataArray = [];\nappName =\"\";\nappNames = [];\nappUsage = [];\ntopAppsNum = 10;\ntopApps = [];\ncount = 0;\nchartData = [];\n\nfunction bytesToSize(bytes) {\n   var sizes = ['KB', 'MB', 'GB', 'TB'];\n   if (bytes == 0) return '0 Byte';\n   var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n   return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];\n}\n\n// function gtTopAppsForAllClients(){\n//     for (i in data) {\n//         json = JSON.parse(data[i].APP_DATA);\n//         for (app in json) {\n//             appName = app;\n//             totalData[appName] = {usage : parseInt(json[app].sent)+parseInt(json[app].recv)};\n//         }\n//     }    \n// }\n\ndata = {};\nmsg.payload = JSON.parse(msg.payload);\nfunction createObj(application) {\n    data[application] = {usage:0, dest:\"\", activeSec:0};\n}\n\nfor (i=0; i<msg.payload.length; i++) {\n    pkt = msg.payload[i];\n    createObj(pkt[\"application\"]);\n}\n\nfor (i=0; i<msg.payload.length; i++) {\n    pkt = msg.payload[i];\n    data[pkt[\"application\"]][\"usage\"] += pkt[\"sent\"]+pkt[\"recv\"];\n    data[pkt[\"application\"]][\"dest\"] = pkt[\"destination\"];\n    data[pkt[\"application\"]][\"activeSec\"] += pkt[\"activeSeconds\"];\n}\n\n// json = JSON.parse(data.APP_DATA);\n// for (app in json) {\n//     appName = app.application;\n//     destination = app.destination;\n//     recv = app.recv;\n//     sent = app.sent;\n//     activeSeconds = app.activeSeconds;\n//     totalData[appName] = {usage : parseInt(json[app].sent)+parseInt(json[app].recv), dest : destination, activeSeconds : activeSec};\n// }\n\n// Array.from(totalData).sort(function(a, b) {\n//         return b.usage - a.usage;\n//     }).sort();\n\nfor (app in data) {\n    dataArray.push({APP : app, DATA : data[app]});\n}\n\ndataArray.sort(function(a, b) {\n        return b.DATA.usage - a.DATA.usage;\n    });\n\n// for (i=0;i<topAppsNum;i++) {\n//     // if(totalData[i] != \"Miscellaneous secure web\")\n//         // topApps.push(dataArray[i].usage);\n//         name = dataArray[i].usage;\n//         // for (j in )\n// }\n\nseries = [];\ndata = [];\nlabels = [];\nfor (i in dataArray) {\n    count++;\n    series.push(dataArray[i].APP);\n    data.push(parseInt(dataArray[i].DATA.usage));\n    labels.push(dataArray[i].APP);\n    if(count==10)\n        break;\n}\n\nmsg.payload =   [\n        {\n            \"series\": series,\n            \"data\": [\n                data\n            ],\n            \"labels\": labels\n        }\n    ];\n\nreturn msg;","outputs":1,"noerr":0,"x":2750,"y":920,"wires":[["dbb98411.02a0d8"]]},{"id":"998d7e2f.cc5b5","type":"ui_chart","z":"89b2c70b.5de378","d":true,"name":"","group":"78dfcd2d.d09a14","order":0,"width":0,"height":0,"label":"chart","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":870,"y":1180,"wires":[[]]},{"id":"e0422ec2.1147b","type":"function","z":"89b2c70b.5de378","name":"","func":"\nreturn msg;","outputs":1,"noerr":0,"x":700,"y":1180,"wires":[["998d7e2f.cc5b5"]]},{"id":"e239463.3e781b8","type":"inject","z":"89b2c70b.5de378","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":520,"y":1180,"wires":[["e0422ec2.1147b"]]},{"id":"db2a2773.4a7198","type":"ui_button","z":"89b2c70b.5de378","name":"","group":"8dab460c.cb4e88","order":2,"width":"2","height":"1","passthru":false,"label":"Fetch","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":1510,"y":400,"wires":[["ac7da5f1.3f2808","6ba9ca17.32a9f4","97e4e979.7019d8"]]},{"id":"97e4e979.7019d8","type":"function","z":"89b2c70b.5de378","name":"check","func":"msg.payload = [flow.get(\"options\"), flow.get(\"timespan\"), flow.get(\"startTime\"), flow.get(\"clientId\")];\nreturn msg;","outputs":1,"noerr":0,"x":1690,"y":400,"wires":[["a523dcd6.75e3c"]]},{"id":"33f1a463.2d297c","type":"template","z":"89b2c70b.5de378","name":"","field":"payload","fieldType":"msg","format":"css","syntax":"mustache","template":".client {  \n    animation-name: floating;\n    animation-duration: 3s;\n    animation-iteration-count: infinite;\n    animation-timing-function: ease-in-out;\n    margin-left: 30px;\n    margin-top: 5px;\n}\n\n@keyframes floating {\n    from { transform: translate(0,  0px); }\n    65%  { transform: translate(0, 15px); }\n    to   { transform: translate(0, -0px); }    \n}","output":"str","x":3500,"y":300,"wires":[[]]},{"id":"5339953c.ed085c","type":"change","z":"9d8eb838.7749b8","name":"","rules":[{"t":"set","p":"action","pt":"msg","to":"restore","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":589.5,"y":53,"wires":[[]]},{"id":"9dd13068.85a18","type":"json","z":"9d8eb838.7749b8","name":"","x":175.5,"y":85,"wires":[["5339953c.ed085c"]]},{"id":"f4833c74.e379a","type":"catch","z":"9d8eb838.7749b8","name":"","scope":["9dd13068.85a18"],"x":183.5,"y":117,"wires":[["65603a18.fea4e4"]]},{"id":"65603a18.fea4e4","type":"change","z":"9d8eb838.7749b8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"[]","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":354.5,"y":116,"wires":[["5339953c.ed085c"]]},{"id":"8a531437.d66248","type":"inject","z":"9d8eb838.7749b8","name":"Trigger restore","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"x":618.5,"y":169,"wires":[[]]},{"id":"42a32eb0.2dafd","type":"function","z":"89b2c70b.5de378","name":"","func":"msg.headers = {\n    \"X-Cisco-Meraki-API-Key\": global.get(\"X-Cisco-Meraki-API-Key\")\n};\nmsg.method = 'get';\nmsg.url = global.get(\"baseURL\")+\"networks/\"+global.get(\"networkId\")+\"/clients?perPage=1000\";\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":400,"wires":[["3ab980db.42a2c"]]},{"id":"3ab980db.42a2c","type":"http request","z":"89b2c70b.5de378","name":"","method":"use","ret":"txt","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":430,"y":400,"wires":[["91354393.ac19"]]},{"id":"91354393.ac19","type":"function","z":"89b2c70b.5de378","name":"filter2","func":"data = JSON.parse(msg.payload);\nclients = [];\ncount =0;\nstudents = global.get(\"students\");\nfor (i in data) {\n    count++;\n    for (j in students) {\n        \n        if(students[j].mac == data[i].mac && students[j].email == data[i].user)\n        {\n            clients.push({title : data[i].description, \n        description : \"<div><h4>\"+data[i].user+\"</h4><h4>\"+data[i].mac+\"</h4><id>\"+data[i].id+\"<id></div><br>\",\n        icon : 'https://cdn2.iconfinder.com/data/icons/user-icon-2-1/100/user_5-15-512.png',\n        clientId : data[i].id\n        })\n        }\n    \n    }\n    \n    \n    // if (count==15)\n        // break;\n    // }\n}\nmsg.students = students;\nmsg.payload = clients;\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":400,"wires":[["a04fd86a.a40bd8","c3ba7da8.28c1"]]},{"id":"5312f94e.be0d18","type":"ui_chart","z":"89b2c70b.5de378","name":"","group":"8471eae5.bd29a8","order":1,"width":0,"height":0,"label":"chart","chartType":"bar","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":2670,"y":660,"wires":[[]]},{"id":"dbb98411.02a0d8","type":"ui_chart","z":"89b2c70b.5de378","name":"","group":"8471eae5.bd29a8","order":1,"width":0,"height":0,"label":"Applications (Top 10)","chartType":"pie","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":true,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":2940,"y":920,"wires":[[]]},{"id":"610ad64a.719eb8","type":"function","z":"89b2c70b.5de378","name":"","func":"// data = msg.payload;\nmaxTotal = 0;\ntotalData = new Set();\ndataArray = [];\nappName =\"\";\nappNames = [];\nappUsage = [];\ntopAppsNum = 10;\ntopApps = [];\ncount = 0;\nchartData = [];\n\nfunction bytesToSize(bytes) {\n   var sizes = ['KB', 'MB', 'GB', 'TB'];\n   if (bytes == 0) return '0 Byte';\n   var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n   return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];\n}\n\n// function gtTopAppsForAllClients(){\n//     for (i in data) {\n//         json = JSON.parse(data[i].APP_DATA);\n//         for (app in json) {\n//             appName = app;\n//             totalData[appName] = {usage : parseInt(json[app].sent)+parseInt(json[app].recv)};\n//         }\n//     }    \n// }\n\ndata = {};\nmsg.payload = JSON.parse(msg.payload);\nfunction createObj(application) {\n    data[application] = {usage:0, dest:\"\", activeSec:0};\n}\n\nfor (i=0; i<msg.payload.length; i++) {\n    pkt = msg.payload[i];\n    createObj(pkt[\"application\"]);\n}\n\nfor (i=0; i<msg.payload.length; i++) {\n    pkt = msg.payload[i];\n    data[pkt[\"application\"]][\"usage\"] += pkt[\"sent\"]+pkt[\"recv\"];\n    data[pkt[\"application\"]][\"dest\"] = pkt[\"destination\"];\n    data[pkt[\"application\"]][\"activeSec\"] += pkt[\"activeSeconds\"];\n}\n\n// json = JSON.parse(data.APP_DATA);\n// for (app in json) {\n//     appName = app.application;\n//     destination = app.destination;\n//     recv = app.recv;\n//     sent = app.sent;\n//     activeSeconds = app.activeSeconds;\n//     totalData[appName] = {usage : parseInt(json[app].sent)+parseInt(json[app].recv), dest : destination, activeSeconds : activeSec};\n// }\n\n// Array.from(totalData).sort(function(a, b) {\n//         return b.usage - a.usage;\n//     }).sort();\n\nfor (app in data) {\n    dataArray.push({APP : app, DATA : data[app]});\n}\n\ndataArray.sort(function(a, b) {\n        return b.DATA.usage - a.DATA.usage;\n    });\n\n// for (i=0;i<topAppsNum;i++) {\n//     // if(totalData[i] != \"Miscellaneous secure web\")\n//         // topApps.push(dataArray[i].usage);\n//         name = dataArray[i].usage;\n//         // for (j in )\n// }\n\nfor (i in dataArray) {\n    count++;\n    chartData.push({title : dataArray[i].APP, \n    description : bytesToSize(parseInt(dataArray[i].DATA.usage))+\"\\n\\n\"\n    })\n    // if (count==10)\n    //     break;\n}\nmsg.payload = chartData;\nreturn msg;","outputs":1,"noerr":0,"x":2770,"y":840,"wires":[["387cd688.e220ba"]]},{"id":"c62f4380.e5a6e","type":"function","z":"89b2c70b.5de378","name":"","func":"clientId =  flow.get(\"clientId\");//msg.payload.description.split(\"\\n\")[2];\nmsg.headers = {\n    \"X-Cisco-Meraki-API-Key\": global.get(\"X-Cisco-Meraki-API-Key\")\n};\nmsg.method = 'get';\nmsg.url = global.get(\"baseURL\")+\"networks/\"+global.get(\"networkId\")+\"/clients/\"+clientId+\"/policy\";\nreturn msg;","outputs":1,"noerr":0,"x":2530,"y":360,"wires":[["775a9143.8c41b"]]},{"id":"e315524b.f03b2","type":"function","z":"eaccbe40.a5df5","name":"","func":"msg.payload=\"<div className=\\\"client\\\" text-align=\\\"center\\\"><client><name><h1>\"+msg.graphData.name+\"</h1></name><description><p>\"+msg.graphData.description+\"</p></description><mac><p>\"+msg.graphData.mac+\"</p></mac><os><p>\"+msg.graphData.os+\"</p></os><status><p>\"+msg.graphData.status+\"</p></status><ip><p>\"+msg.graphData.ip+\"</p></ip><os><p>\"+msg.graphData.os+\"</p></os><ssid><p>\"+msg.graphData.ssid+\"</p></ssid><device><p>\"+msg.graphData.recentDeviceName+\"</p></device></client></div>\";\nreturn msg;","outputs":1,"noerr":0,"x":1072.22216796875,"y":506.6666564941406,"wires":[["bcfe6d16.87842"]]},{"id":"bcfe6d16.87842","type":"ui_text","z":"eaccbe40.a5df5","d":true,"group":"8dab460c.cb4e88","order":13,"width":"6","height":"10","name":"","label":"","format":"{{msg.payload}}","layout":"col-center","x":1212.22216796875,"y":506.6666564941406,"wires":[]},{"id":"5ddb31b5.11b31","type":"function","z":"eaccbe40.a5df5","name":"","func":"// msg.payload = { series: [\"\"], data : [111,222,333], labels: [\"A\", \"B\", \"C\"]};\n// msg.payload = { \"channel\": \"TP01\", \"color\": \"Red\", \"dataset\": [{\"x\": 1, \"y\": 10}, {\"x\": 2, \"y\": 8 }, {\"x\": 3, \"y\": 15}] };\nmsg.payload =   [\n        {\n            \"series\": [ \"X\", \"Y\" ],\n            \"data\": [\n                [ 77, 23 ]\n            ],\n            \"labels\": [ \"Jan\", \"mon\" ]\n        }\n    ];\nreturn msg;","outputs":1,"noerr":0,"x":1730,"y":880,"wires":[[]]},{"id":"8613c2e1.fc816","type":"inject","z":"eaccbe40.a5df5","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1560,"y":880,"wires":[["5ddb31b5.11b31"]]},{"id":"967cef63.1229d","type":"function","z":"eaccbe40.a5df5","name":"","func":"data = msg.payload;\nmaxTotal = 0;\ntotalData = new Set();\ndataArray = [];\nappName =\"\";\nappNames = [];\nappUsage = [];\ntopAppsNum = 10;\ntopApps = [];\ncount = 0;\nchartData = [];\n\nfunction bytesToSize(bytes) {\n   var sizes = ['KB', 'MB', 'GB', 'TB'];\n   if (bytes == 0) return '0 Byte';\n   var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n   return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];\n}\n\nfunction gtTopAppsForAllClients(){\n    for (i in data) {\n        json = JSON.parse(data[i].APP_DATA);\n        for (app in json) {\n            appName = app;\n            totalData[appName] = {usage : parseInt(json[app].sent)+parseInt(json[app].recv)};\n        }\n    }    \n}\n\njson = JSON.parse(data[0].APP_DATA);\nfor (app in json) {\n    appName = app;\n    totalData[appName] = {usage : parseInt(json[app].sent)+parseInt(json[app].recv)};\n}\n\n// Array.from(totalData).sort(function(a, b) {\n//         return b.usage - a.usage;\n//     }).sort();\n\nfor (app in totalData) {\n    dataArray.push({APP : app, DATA : totalData[app]});\n}\n\ndataArray.sort(function(a, b) {\n        return b.DATA.usage - a.DATA.usage;\n    });\n\n// for (i=0;i<topAppsNum;i++) {\n//     // if(totalData[i] != \"Miscellaneous secure web\")\n//         // topApps.push(dataArray[i].usage);\n//         name = dataArray[i].usage;\n//         // for (j in )\n// }\n\nfor (i in dataArray) {\n    count++;\n    chartData.push({title : dataArray[i].APP, \n    description : bytesToSize(parseInt(dataArray[i].DATA.usage))+\"\\n\\n\"\n    })\n    if (count==10)\n        break;\n}\n\nmsg.payload = chartData;\nreturn msg;","outputs":1,"noerr":0,"x":907.5,"y":882.5,"wires":[[]]},{"id":"40a7db7d.0e5604","type":"mysql","z":"eaccbe40.a5df5","d":true,"mydb":"52258174.c9c2c","name":"db","x":760.5,"y":882.5,"wires":[["967cef63.1229d"]]},{"id":"775a9143.8c41b","type":"http request","z":"89b2c70b.5de378","name":"","method":"GET","ret":"txt","paytoqs":false,"url":"","persist":false,"authType":"","x":2700,"y":360,"wires":[["2344042a.4f67dc"]]},{"id":"2344042a.4f67dc","type":"function","z":"89b2c70b.5de378","name":"parsing req","func":"data = JSON.parse(msg.payload);\npolicy = data.type;\nmsg.policy = \"Device Policy : \"+policy;\nreturn msg;","outputs":1,"noerr":0,"x":2880,"y":360,"wires":[["82a527e1.ddb338"]]},{"id":"a523dcd6.75e3c","type":"debug","z":"89b2c70b.5de378","name":"dropDown---====","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1910,"y":400,"wires":[]},{"id":"59836cd8.a26584","type":"ui_button","z":"89b2c70b.5de378","name":"Show Notifications","group":"8dab460c.cb4e88","order":10,"width":"3","height":"1","passthru":false,"label":"Sent ","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":2710,"y":500,"wires":[["c4d1c3d4.90775"]]},{"id":"8778f767.d52308","type":"ui_toast","z":"89b2c70b.5de378","position":"dialog","displayTime":"3","highlight":"#ff0000","sendall":true,"outputs":1,"ok":"OK","cancel":"","raw":true,"topic":"","name":"","x":3390,"y":500,"wires":[[]]},{"id":"c4d1c3d4.90775","type":"function","z":"89b2c70b.5de378","name":"","func":"user = flow.get(\"user\");\nmsg.topic = \"select * from notifications where user='\"+user+\"';\";\nreturn msg;","outputs":1,"noerr":0,"x":2880,"y":500,"wires":[["ad0a8b60.960e48","802c4731.c80468"]]},{"id":"ad0a8b60.960e48","type":"mysql","z":"89b2c70b.5de378","mydb":"52258174.c9c2c","name":"db","x":3030,"y":500,"wires":[["f8c5fbbb.c397d8","802c4731.c80468"]]},{"id":"f8c5fbbb.c397d8","type":"function","z":"89b2c70b.5de378","name":"","func":"msg.topic = \"Sent Notifications\";\ndata = \"<ul>\";\nfor (i in msg.payload) {\n    data += \"<li>\"+msg.payload[i].msg+\"</li>\";\n}\ndata += \"</ul>\";\nmsg.payload = data;\nreturn msg;","outputs":1,"noerr":0,"x":3190,"y":500,"wires":[["8778f767.d52308","802c4731.c80468"]]},{"id":"e38f6fa8.f3b66","type":"mysql","z":"89b2c70b.5de378","mydb":"52258174.c9c2c","name":"db","x":3970,"y":80,"wires":[[]]},{"id":"d432bd7d.8a43f","type":"function","z":"89b2c70b.5de378","name":"","func":"msg.payload =flow.get(\"user\")+\" with mac \"+flow.get(\"mac\")+\" has reached the data limit!!!\";\nmsg.topic = \"insert into notifications (user, date, msg) values ('\"+flow.get(\"user\")+\"', '\"+Date()+\"', '\"+msg.payload+\"');\";\nmsg.to = \"vaibhavkashyap2016@gmail.com\";\nreturn msg;","outputs":1,"noerr":0,"x":3790,"y":80,"wires":[["e38f6fa8.f3b66"]]},{"id":"802c4731.c80468","type":"debug","z":"89b2c70b.5de378","name":"log1","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":3400,"y":560,"wires":[]},{"id":"6fe87121.d5edd","type":"ui_dropdown","z":"db102253.019a2","name":"","label":"Courses","tooltip":"Select Courses","place":"Select option","group":"a57256ff.6edab8","order":1,"width":0,"height":0,"passthru":true,"options":[{"label":"Psy101","value":"1","type":"str"},{"label":"Maths101","value":"2","type":"str"},{"label":"CP890","value":"3","type":"str"},{"label":"Dp142","value":"4","type":"str"}],"payload":"","topic":"","x":260,"y":240,"wires":[[]]},{"id":"cfafb5ed.af0f68","type":"ui_button","z":"db102253.019a2","name":"","group":"a57256ff.6edab8","order":2,"width":0,"height":0,"passthru":false,"label":"Add","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":470,"y":240,"wires":[["648969c4.41f518","3dd1b428.1d046c"]]},{"id":"4af5a1d6.19747","type":"ui_text","z":"db102253.019a2","group":"a57256ff.6edab8","order":3,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"row-spread","x":670,"y":160,"wires":[]},{"id":"648969c4.41f518","type":"trigger","z":"db102253.019a2","op1":"false","op2":"","op1type":"bool","op2type":"nul","duration":"1","extend":false,"units":"s","reset":"false","bytopic":"all","name":"","x":120,"y":340,"wires":[["6fe87121.d5edd"]]},{"id":"3dd1b428.1d046c","type":"trigger","z":"db102253.019a2","op1":"Course added successfully","op2":".","op1type":"str","op2type":"str","duration":"1","extend":false,"units":"s","reset":"","bytopic":"all","name":"","x":440,"y":360,"wires":[["4af5a1d6.19747","6fa6426e.8dc00c"]]},{"id":"6fa6426e.8dc00c","type":"debug","z":"db102253.019a2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":740,"y":380,"wires":[]},{"id":"f2640f8.dd7daf","type":"comment","z":"db102253.019a2","name":"Add Course","info":"","x":90,"y":220,"wires":[]},{"id":"806ce9c3.5f6d98","type":"comment","z":"db102253.019a2","name":"Registered Courses","info":"","x":130,"y":460,"wires":[]},{"id":"1c702327.592afd","type":"ui_list","z":"db102253.019a2","group":"a8fb1fad.89ad1","name":"Students List","order":5,"width":"9","height":"16","lineType":"three","actionType":"click","allowHTML":true,"outputs":1,"topic":"","x":750,"y":1000,"wires":[["a73c30a7.8bf55","6dad7a97.b98054"]]},{"id":"fffdb28.b6bfb5","type":"inject","z":"db102253.019a2","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":1000,"wires":[["dba3a990.7d0cf8","b4014622.d18e98"]]},{"id":"dba3a990.7d0cf8","type":"function","z":"db102253.019a2","name":"","func":"msg.headers = {\n    \"X-Cisco-Meraki-API-Key\": global.get(\"X-Cisco-Meraki-API-Key\")\n};\nmsg.method = 'get';\nmsg.url = global.get(\"baseURL\")+\"networks/\"+global.get(\"networkId\")+\"/clients?perPage=1000\";\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":1000,"wires":[["3a5d81dc.c8d55e"]]},{"id":"3a5d81dc.c8d55e","type":"http request","z":"db102253.019a2","name":"","method":"use","ret":"txt","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":430,"y":1000,"wires":[["8d9306d9.4d29b8"]]},{"id":"8d9306d9.4d29b8","type":"function","z":"db102253.019a2","name":"","func":"data = JSON.parse(msg.payload);\nclients = [];\ncount =0;\nstudents = global.get(\"students\");\nfor (i in data) {\n    count++;\n    for (j in students) {\n        \n        if(students[j].mac == data[i].mac && students[j].email == data[i].user)\n        {\n        clients.push({title : data[i].description, \n        description : \"<div><h4>\"+data[i].user+\"</h4><h4>\"+data[i].mac+\"</h4><id>\"+data[i].id+\"<id></div><br>\",\n        icon : 'https://cdn2.iconfinder.com/data/icons/user-icon-2-1/100/user_5-15-512.png',\n        Id: data[i].id,\n        email: data[i].user,\n        mac : data[i].mac\n        })\n        }\n    }\n}\nmsg.payload = clients;\nreturn msg;","outputs":1,"noerr":0,"x":590,"y":1000,"wires":[["1c702327.592afd"]]},{"id":"20376b0e.75b3c4","type":"function","z":"db102253.019a2","name":"","func":"global.set(\"X-Cisco-Meraki-API-Key\", \"a642e5949aa7ec6c3834956084c409c926c861cb\");\nglobal.set(\"baseURL\", \"https://api.meraki.com/api/v0/\");\nglobal.set(\"networkId\", \"L_577023702256850241\");\nflow.set(\"timespan\", \"3600\");\nflow.set(\"startTime\",1577836800000);\nflow.set(\"nodeRedPwd\", \"vmtvgbiyuxentsol\");\nflow.set(\"options\", [\"Starting from this month\", \"Last Week\", \"Today\", \"For last day\", \"For last 2 Hours\"]);\n\n\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":100,"wires":[[]]},{"id":"421b0e93.433af","type":"comment","z":"db102253.019a2","name":"Global Variables","info":"","x":120,"y":20,"wires":[]},{"id":"bd164dbe.b71bf","type":"inject","z":"db102253.019a2","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":100,"wires":[["20376b0e.75b3c4"]]},{"id":"d18a665d.3d2b48","type":"function","z":"db102253.019a2","name":"","func":"msg.topic = 'select * from clients2;';\nreturn msg;\n","outputs":1,"noerr":0,"x":250,"y":700,"wires":[[]]},{"id":"3682bc00.901934","type":"inject","z":"db102253.019a2","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":680,"wires":[["d18a665d.3d2b48"]]},{"id":"47c2e882.57ccf8","type":"function","z":"db102253.019a2","name":"","func":"// var arr =[{\"1/1/2020\",\"1\",\"0\",\"1\",\"1\"},{\"2/1/2020\",\"1\",\"0\",\"1\",\"0\"},{\"3/1/2020\",\"1\",\"0\",\"1\",\"1\"},{\"4/1/2020\",\"1\",\"0\",\"1\",\"1\"},{\"5/1/2020\",\"1\",\"0\",\"0\",\"1\"},{\"6/1/2020\",\"1\",\"1\",\"1\",\"1\"},{\"7/1/2020\",\"1\",\"0\",\"0\",\"1\"}];\nvar arr =[\n    {\n        \"Date\": \"1/1/2020\",\n        \"Maths101\": \"1\",\n        \"Psy101\": \"0\",\n        \"DC206\": \"1\",\n        \"COMM101\": \"1\"\n        },\n        \n        {\n        \"Date\": \"2/1/2020\",\n        \"Maths101\": \"1\",\n        \"Psy101\": \"0\",\n        \"DC206\": \"0\",\n        \"COMM101\": \"1\"\n        },\n{\n        \"Date\": \"3/1/2020\",\n        \"Maths101\": \"1\",\n        \"Psy101\": \"1\",\n        \"DC206\": \"1\",\n        \"COMM101\": \"1\"\n        },\n{\n        \"Date\": \"4/1/2020\",\n        \"Maths101\": \"1\",\n        \"Psy101\": \"0\",\n        \"DC206\": \"1\",\n        \"COMM101\": \"0\"\n        },\n{\n        \"Date\": \"5/1/2020\",\n        \"Maths101\": \"0\",\n        \"Psy101\": \"0\",\n        \"DC206\": \"1\",\n        \"COMM101\": \"1\"\n        },\n{\n        \"Date\": \"6/1/2020\",\n        \"Maths101\": \"1\",\n        \"Psy101\": \"1\",\n        \"DC206\": \"1\",\n        \"COMM101\": \"1\"\n        },\n{\n        \"Date\": \"8/1/2020\",\n        \"Maths101\": \"1\",\n        \"Psy101\": \"0\",\n        \"DC206\": \"0\",\n        \"COMM101\": \"1\"\n        },\n        {\n        \"Date\": \"9/1/2020\",\n        \"Maths101\": \"1\",\n        \"Psy101\": \"1\",\n        \"DC206\": \"1\",\n        \"COMM101\": \"1\"\n        },\n{\n        \"Date\": \"10/1/2020\",\n        \"Maths101\": \"1\",\n        \"Psy101\": \"0\",\n        \"DC206\": \"1\",\n        \"COMM101\": \"0\"\n        }\n        ];\nmsg.payload = arr;\nreturn msg;\n\n// var d = [\n//     {\n//         \"Name\": \"Kazuhito Yokoi\",\n//         \"Age\": \"<div style='background-color: yellow; width:100%'>35</div>\",\n//         \"Favourite Color\": \"<font color='blue'><b>Blue</b></font>\",\n//         \"Date Of Birth\": \"12/09/1983\"\n//     },\n//     {\n//         \"Name\": \"Oli Bob\",\n//         \"Age\": \"12\",\n//         \"Favourite Color\": \"<font color='red'><b>Red</b></font>\",\n//         \"Date Of Birth\": \"12/08/2017\"\n//     }\n// ]\n\n// // d= [\n// //     {\n// //         \"id\": \"bc380b4b.e2d668\",\n// //         \"type\": \"inject\",\n// //         \"z\": \"9663b812.93cc28\",\n// //         \"name\": \"\",\n// //         \"topic\": \"\",\n// //         \"payload\": \"[{\\\"Name\\\":\\\"Kazuhito Yokoi\\\",\\\"Age\\\":\\\"35\\\",\\\"Favourite Color\\\":\\\"red\\\",\\\"Date Of Birth\\\":\\\"12/09/1983\\\"},{\\\"Name\\\":\\\"Oli Bob\\\",\\\"Age\\\":\\\"12\\\",\\\"Favourite Color\\\":\\\"red\\\",\\\"Date Of Birth\\\":\\\"12/08/2017\\\"}]\",\n// //         \"payloadType\": \"json\",\n// //         \"repeat\": \"\",\n// //         \"crontab\": \"\",\n// //         \"once\": false,\n// //         \"onceDelay\": 0.1,\n// //         \"x\": 150,\n// //         \"y\": 220,\n// //         \"wires\": [\n// //             [\n// //                 \"2460c057.cfbc4\"\n// //             ]\n// //         ]\n// //     },\n// //     {\n// //         \"id\": \"2460c057.cfbc4\",\n// //         \"type\": \"ui_table\",\n// //         \"z\": \"9663b812.93cc28\",\n// //         \"group\": \"625872f.40b1e8c\",\n// //         \"name\": \"\",\n// //         \"width\": 0,\n// //         \"height\": 4,\n// //         \"columns\": [],\n// //         \"x\": 350,\n// //         \"y\": 220,\n// //         \"wires\": []\n// //     },\n// //     {\n// //         \"id\": \"9e33f566.8c9098\",\n// //         \"type\": \"comment\",\n// //         \"z\": \"9663b812.93cc28\",\n// //         \"name\": \"Normal table\",\n// //         \"info\": \"\",\n// //         \"x\": 150,\n// //         \"y\": 180,\n// //         \"wires\": []\n// //     },\n// //     {\n// //         \"id\": \"625872f.40b1e8c\",\n// //         \"type\": \"ui_group\",\n// //         \"z\": \"\",\n// //         \"name\": \"Default\",\n// //         \"tab\": \"58c2aa06.ef46e4\",\n// //         \"disp\": true,\n// //         \"width\": \"6\",\n// //         \"collapse\": false\n// //     },\n// //     {\n// //         \"id\": \"58c2aa06.ef46e4\",\n// //         \"type\": \"ui_tab\",\n// //         \"z\": \"\",\n// //         \"name\": \"Home\",\n// //         \"icon\": \"dashboard\",\n// //         \"disabled\": false,\n// //         \"hidden\": false\n// //     }\n// // ]\n// msg.payload = d;\n// return msg;","outputs":1,"noerr":0,"x":240,"y":800,"wires":[[]]},{"id":"9cdbbb9f.886ca8","type":"inject","z":"db102253.019a2","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":760,"wires":[["47c2e882.57ccf8"]]},{"id":"5efdab73.8c4b34","type":"ui_table","z":"db102253.019a2","group":"1af318c6.b10257","name":"","order":1,"width":"15","height":"6","columns":[],"outputs":0,"cts":false,"x":1850,"y":1000,"wires":[]},{"id":"752daaa1.927af4","type":"function","z":"db102253.019a2","name":"","func":"var data= [\"Maths101\",\n\"psy101\",\n\"DC206\",\n\"COMM101\"];\n\n\n\ncourses = [];\ncount =0;\nfor (i in data) {\n    count++;\n    // if(data[i].CLIENT_ID==\"k91064c\") {\n    courses.push({title : data[i] \n    // description : \"<div><h4>\"+data[i].user+\"</h4><h4>\"+data[i].mac+\"</h4><id>\"+data[i].id+\"<id></div><br>\",\n    // icon : 'https://cdn2.iconfinder.com/data/icons/user-icon-2-1/100/user_5-15-512.png',\n    // Id: data[i].id\n    })\n    // if (count==15)\n        // break;\n    // }\n}\nmsg.payload = courses;\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":600,"wires":[[]]},{"id":"551d58fe.457c58","type":"inject","z":"db102253.019a2","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":600,"wires":[["752daaa1.927af4"]]},{"id":"f63205ac.0f9de8","type":"ui_list","z":"db102253.019a2","group":"a9b2627c.bf8b5","name":"Courses List","order":1,"width":"6","height":"6","lineType":"one","actionType":"none","allowHTML":false,"outputs":0,"topic":"","x":1410,"y":860,"wires":[]},{"id":"feb3ba4f.5a84a8","type":"ui_dropdown","z":"97dcea88.f529e8","name":"","label":"","tooltip":"","place":"Select option","group":"25c4832.186a27c","order":1,"width":"4","height":"1","passthru":true,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"","x":600,"y":140,"wires":[[]]},{"id":"4f2a6140.22b1a","type":"function","z":"97dcea88.f529e8","name":"","func":"msg.options = [\"BTech\", \"MTech\", \"Phd\"]\nreturn msg;","outputs":1,"noerr":0,"x":350,"y":140,"wires":[["feb3ba4f.5a84a8"]]},{"id":"55644728.15fb78","type":"inject","z":"97dcea88.f529e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":340,"wires":[["4f2a6140.22b1a","df82b20.6f07a5","ef7f3fce.3bb32","fdad67e7.45f998"]]},{"id":"2d19606f.8dc81","type":"ui_list","z":"97dcea88.f529e8","d":true,"group":"25c4832.186a27c","name":"","order":3,"width":"6","height":"16","lineType":"two","actionType":"click","allowHTML":true,"outputs":1,"topic":"","x":1350,"y":140,"wires":[["a980da29.5855f8"]]},{"id":"47d3255b.59211c","type":"function","z":"97dcea88.f529e8","name":"","func":"msg.headers = {\n    \"X-Cisco-Meraki-API-Key\": global.get(\"X-Cisco-Meraki-API-Key\")\n};\nmsg.method = 'get';\nmsg.url = global.get(\"baseURL\")+\"networks/\"+global.get(\"networkId\")+\"/clients?perPage=1000\";\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":140,"wires":[["19254531.c1578b"]]},{"id":"19254531.c1578b","type":"http request","z":"97dcea88.f529e8","name":"","method":"GET","ret":"txt","paytoqs":false,"url":"","persist":false,"authType":"","x":1030,"y":140,"wires":[["4004263e.a4ce28"]]},{"id":"4004263e.a4ce28","type":"function","z":"97dcea88.f529e8","name":"","func":"data = JSON.parse(msg.payload);\nclients = [];\ncount =0;\nfor (i in data) {\n    count++;\n    // if(data[i].CLIENT_ID==\"k91064c\") {\n    clients.push({title : data[i].description, \n    description : \"<div><h4>\"+data[i].user+\"</h4><h4>\"+data[i].mac+\"</h4><id>\"+data[i].id+\"<id></div><br>\",\n    icon : 'https://cdn2.iconfinder.com/data/icons/user-icon-2-1/100/user_5-15-512.png'\n    })\n    // if (count==15)\n        // break;\n    // }\n}\nmsg.payload = clients;\nreturn msg;","outputs":1,"noerr":0,"x":1210,"y":140,"wires":[["2d19606f.8dc81"]]},{"id":"a980da29.5855f8","type":"function","z":"97dcea88.f529e8","name":"","func":"c = msg.payload.description.split(\"<id>\");\nclientId = c[1];\nflow.set(\"clientId\", clientId);\nflow.set(\"options\", msg.options);\nmsg.payload = clientId;\nreturn msg;","outputs":1,"noerr":0,"x":1490,"y":140,"wires":[["c9733c5a.f484b"]]},{"id":"c9733c5a.f484b","type":"ui_toast","z":"97dcea88.f529e8","d":true,"position":"dialog","displayTime":"3","highlight":"","sendall":true,"outputs":1,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":1670,"y":140,"wires":[[]]},{"id":"de0b3e2b.22268","type":"ui_dropdown","z":"97dcea88.f529e8","name":"","label":"","tooltip":"","place":"Select option","group":"db4302f3.6c402","order":1,"width":"4","height":"1","passthru":true,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"","x":582,"y":500,"wires":[[]]},{"id":"df82b20.6f07a5","type":"function","z":"97dcea88.f529e8","name":"","func":"msg.options = [\"Gaming\", \"Youtube\", \"Social\"];\nreturn msg;","outputs":1,"noerr":0,"x":350,"y":500,"wires":[["de0b3e2b.22268"]]},{"id":"ef7f3fce.3bb32","type":"ui_template","z":"97dcea88.f529e8","group":"25c4832.186a27c","name":"","order":5,"width":"15","height":"1","format":"<div>\n    <h3>Notification Medium</h3>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":360,"y":580,"wires":[[]]},{"id":"fdad67e7.45f998","type":"ui_template","z":"97dcea88.f529e8","group":"db4302f3.6c402","name":"","order":1,"width":"15","height":"1","format":"<div>\n    <h3>Notification Medium</h3>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":360,"y":680,"wires":[[]]},{"id":"f8f4a6a.bf5b858","type":"ui_switch","z":"97dcea88.f529e8","name":"","label":"Webex","tooltip":"","group":"25c4832.186a27c","order":6,"width":"6","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":830,"y":440,"wires":[[]]},{"id":"411f6a89.ba7924","type":"ui_switch","z":"97dcea88.f529e8","name":"","label":"Mail","tooltip":"","group":"25c4832.186a27c","order":8,"width":"6","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":810,"y":500,"wires":[[]]},{"id":"d5af790a.02e1f8","type":"ui_switch","z":"97dcea88.f529e8","name":"","label":"Webex","tooltip":"","group":"db4302f3.6c402","order":6,"width":"6","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":820,"y":840,"wires":[[]]},{"id":"6253678a.c71ee8","type":"ui_switch","z":"97dcea88.f529e8","name":"","label":"Mail","tooltip":"","group":"db4302f3.6c402","order":8,"width":"6","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":800,"y":900,"wires":[[]]},{"id":"cf791133.9ccc3","type":"meraki-dashboard-api","z":"fa28c570.7a51b8","service":"d7867bd.ab24788","name":"getOrganizations","selectedGroup":"Organizations","selectedMethod":"getOrganizations","filteredMethods":[{"methodGroup":"Organizations","methodName":"getOrganizations","parameters":[],"formHtml":"<h4>Parameters</h4>","example":"[\n  [\n    {\n      \"id\": \"2930418\",\n      \"name\": \"My organization\",\n      \"url\": \"https://dashboard.meraki.com/o/VjjsAd/manage/organization/overview\"\n    }\n  ]\n]","summary":"List the organizations that the user has privileges on"},{"methodGroup":"Organizations","methodName":"createOrganization","parameters":[{"camelCaseName":"createOrganization"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"createOrganization_createOrganization\"><label for=\"node-input-createOrganization_createOrganization\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>createOrganization<span style=\"color:red;\"> *</span></b> <i>&nbsp</i></span></label><p></p><input type=\"text\" id=\"node-input-createOrganization_createOrganization\" placeholder=\"msg.createOrganization\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-createOrganization_createOrganizationType\" value=\"\" ></div>","example":"[\n  {\n    \"id\": \"2930418\",\n    \"name\": \"My organization\",\n    \"url\": \"https://dashboard.meraki.com/o/VjjsAd/manage/organization/overview\"\n  }\n]","summary":"Create a new organization"},{"methodGroup":"Organizations","methodName":"getOrganization","parameters":[{"camelCaseName":"organizationId"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getOrganization_organizationId\"><label for=\"node-input-getOrganization_organizationId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>organizationId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getOrganization_organizationId\" placeholder=\"msg.organizationId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getOrganization_organizationIdType\" value=\"string\" ></div>","example":"[\n  {\n    \"id\": \"2930418\",\n    \"name\": \"My organization\",\n    \"url\": \"https://dashboard.meraki.com/o/VjjsAd/manage/organization/overview\"\n  }\n]","summary":"Return an organization"},{"methodGroup":"Organizations","methodName":"updateOrganization","parameters":[{"camelCaseName":"organizationId"},{"camelCaseName":"updateOrganization"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"updateOrganization_organizationId\"><label for=\"node-input-updateOrganization_organizationId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>organizationId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-updateOrganization_organizationId\" placeholder=\"msg.organizationId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-updateOrganization_organizationIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"updateOrganization_updateOrganization\"><label for=\"node-input-updateOrganization_updateOrganization\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>updateOrganization</b> <i>&nbsp</i></span></label><p></p><input type=\"text\" id=\"node-input-updateOrganization_updateOrganization\" placeholder=\"msg.updateOrganization\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-updateOrganization_updateOrganizationType\" value=\"\" ></div>","example":"[\n  {\n    \"id\": \"2930418\",\n    \"name\": \"My organization\",\n    \"url\": \"https://dashboard.meraki.com/o/VjjsAd/manage/organization/overview\"\n  }\n]","summary":"Update an organization"},{"methodGroup":"Organizations","methodName":"deleteOrganization","parameters":[{"camelCaseName":"organizationId"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"deleteOrganization_organizationId\"><label for=\"node-input-deleteOrganization_organizationId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>organizationId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-deleteOrganization_organizationId\" placeholder=\"msg.organizationId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-deleteOrganization_organizationIdType\" value=\"string\" ></div>","example":"[]","summary":"Delete an organization"},{"methodGroup":"Organizations","methodName":"claimOrganization","parameters":[{"camelCaseName":"organizationId"},{"camelCaseName":"claimOrganization"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"claimOrganization_organizationId\"><label for=\"node-input-claimOrganization_organizationId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>organizationId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-claimOrganization_organizationId\" placeholder=\"msg.organizationId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-claimOrganization_organizationIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"claimOrganization_claimOrganization\"><label for=\"node-input-claimOrganization_claimOrganization\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>claimOrganization</b> <i>&nbsp</i></span></label><p></p><input type=\"text\" id=\"node-input-claimOrganization_claimOrganization\" placeholder=\"msg.claimOrganization\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-claimOrganization_claimOrganizationType\" value=\"\" ></div>","example":"[\n  {\n    \"orders\": [\n      \"4CXXXXXXX\"\n    ],\n    \"serials\": [\n      \"Q234-ABCD-5678\"\n    ],\n    \"licenses\": [\n      {\n        \"key\": \"Z2XXXXXXXXXX\",\n        \"mode\": \"addDevices\"\n      }\n    ]\n  }\n]","summary":"Claim a list of devices licenses and/or orders into an organization. When claiming by order all devices and licenses in the order will be claimed; licenses will be added to the organization and devices will be placed in the organizations inventory."},{"methodGroup":"Organizations","methodName":"cloneOrganization","parameters":[{"camelCaseName":"organizationId"},{"camelCaseName":"cloneOrganization"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"cloneOrganization_organizationId\"><label for=\"node-input-cloneOrganization_organizationId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>organizationId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-cloneOrganization_organizationId\" placeholder=\"msg.organizationId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-cloneOrganization_organizationIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"cloneOrganization_cloneOrganization\"><label for=\"node-input-cloneOrganization_cloneOrganization\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>cloneOrganization<span style=\"color:red;\"> *</span></b> <i>&nbsp</i></span></label><p></p><input type=\"text\" id=\"node-input-cloneOrganization_cloneOrganization\" placeholder=\"msg.cloneOrganization\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-cloneOrganization_cloneOrganizationType\" value=\"\" ></div>","example":"[\n  {\n    \"id\": \"2930418\",\n    \"name\": \"My organization\",\n    \"url\": \"https://dashboard.meraki.com/o/VjjsAd/manage/organization/overview\"\n  }\n]","summary":"Create a new organization by cloning the addressed organization"},{"methodGroup":"Organizations","methodName":"getOrganizationDeviceStatuses","parameters":[{"camelCaseName":"organizationId"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getOrganizationDeviceStatuses_organizationId\"><label for=\"node-input-getOrganizationDeviceStatuses_organizationId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>organizationId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getOrganizationDeviceStatuses_organizationId\" placeholder=\"msg.organizationId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getOrganizationDeviceStatuses_organizationIdType\" value=\"string\" ></div>","example":"[\n  [\n    {\n      \"name\": \"My AP\",\n      \"serial\": \"Q234-ABCD-5678\",\n      \"mac\": \"00:11:22:33:44:55\",\n      \"status\": \"online\",\n      \"lanIp\": \"1.2.3.4\",\n      \"publicIp\": \"123.123.123.1\",\n      \"networkId\": \"N_24329156\"\n    }\n  ]\n]","summary":"List the status of every Meraki device in the organization"},{"methodGroup":"Organizations","methodName":"getOrganizationInventory","parameters":[{"camelCaseName":"organizationId"},{"camelCaseName":"includeLicenseInfo"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getOrganizationInventory_organizationId\"><label for=\"node-input-getOrganizationInventory_organizationId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>organizationId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getOrganizationInventory_organizationId\" placeholder=\"msg.organizationId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getOrganizationInventory_organizationIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getOrganizationInventory_includeLicenseInfo\"><label for=\"node-input-getOrganizationInventory_includeLicenseInfo\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>includeLicenseInfo</b> <i>&nbspboolean</i></span></label><p>When this parameter is true, each entity in the response will include the license expiration date of the device (if any). Only applies to organizations that support per-device licensing. Defaults to false.</p><input type=\"text\" id=\"node-input-getOrganizationInventory_includeLicenseInfo\" placeholder=\"msg.includeLicenseInfo\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getOrganizationInventory_includeLicenseInfoType\" value=\"boolean\" ></div>","example":"[\n  [\n    {\n      \"mac\": \"00:11:22:33:44:55\",\n      \"serial\": \"Q234-ABCD-5678\",\n      \"networkId\": \"N_24329156\",\n      \"model\": \"MR34\",\n      \"claimedAt\": 1518365681,\n      \"publicIp\": \"123.123.123.1\",\n      \"name\": \"My AP\"\n    }\n  ]\n]","summary":"Return the inventory for an organization"},{"methodGroup":"Organizations","methodName":"getOrganizationLicenseState","parameters":[{"camelCaseName":"organizationId"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getOrganizationLicenseState_organizationId\"><label for=\"node-input-getOrganizationLicenseState_organizationId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>organizationId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getOrganizationLicenseState_organizationId\" placeholder=\"msg.organizationId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getOrganizationLicenseState_organizationIdType\" value=\"string\" ></div>","example":"[\n  {\n    \"status\": \"OK\",\n    \"expirationDate\": \"Feb 8, 2020 UTC\",\n    \"licensedDeviceCounts\": {\n      \"MS\": 100\n    }\n  }\n]","summary":"Return the license state for an organization"},{"methodGroup":"Organizations","methodName":"getOrganizationThirdPartyVPNPeers","parameters":[{"camelCaseName":"organizationId"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getOrganizationThirdPartyVPNPeers_organizationId\"><label for=\"node-input-getOrganizationThirdPartyVPNPeers_organizationId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>organizationId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getOrganizationThirdPartyVPNPeers_organizationId\" placeholder=\"msg.organizationId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getOrganizationThirdPartyVPNPeers_organizationIdType\" value=\"string\" ></div>","example":"[\n  [\n    {\n      \"name\": \"My peer 1\",\n      \"publicIp\": \"123.123.123.1\",\n      \"privateSubnets\": [\n        \"192.168.1.0/24\",\n        \"192.168.128.0/24\"\n      ],\n      \"secret\": \"asdf1234\",\n      \"ipsecPolicies\": {\n        \"ikeCipherAlgo\": [\n          \"tripledes\"\n        ],\n        \"ikeAuthAlgo\": [\n          \"sha1\"\n        ],\n        \"ikeDiffieHellmanGroup\": [\n          \"group2\"\n        ],\n        \"ikeLifetime\": 28800,\n        \"childCipherAlgo\": [\n          \"aes128\"\n        ],\n        \"childAuthAlgo\": [\n          \"sha1\"\n        ],\n        \"childPfsGroup\": [\n          \"disabled\"\n        ],\n        \"childLifetime\": 28800\n      }\n    },\n    {\n      \"name\": \"My peer 2\",\n      \"publicIp\": \"123.123.123.2\",\n      \"remoteId\": \"miles@meraki.com\",\n      \"privateSubnets\": [\n        \"192.168.2.0/24\",\n        \"192.168.129.0/24\"\n      ],\n      \"secret\": \"asdf56785678567856785678\",\n      \"ipsecPoliciesPreset\": \"default\"\n    }\n  ]\n]","summary":"Return the third party VPN peers for an organization"},{"methodGroup":"Organizations","methodName":"updateOrganizationThirdPartyVPNPeers","parameters":[{"camelCaseName":"organizationId"},{"camelCaseName":"updateOrganizationThirdPartyVpnPeers"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"updateOrganizationThirdPartyVPNPeers_organizationId\"><label for=\"node-input-updateOrganizationThirdPartyVPNPeers_organizationId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>organizationId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-updateOrganizationThirdPartyVPNPeers_organizationId\" placeholder=\"msg.organizationId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-updateOrganizationThirdPartyVPNPeers_organizationIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"updateOrganizationThirdPartyVPNPeers_updateOrganizationThirdPartyVpnPeers\"><label for=\"node-input-updateOrganizationThirdPartyVPNPeers_updateOrganizationThirdPartyVpnPeers\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>updateOrganizationThirdPartyVpnPeers<span style=\"color:red;\"> *</span></b> <i>&nbsp</i></span></label><p></p><input type=\"text\" id=\"node-input-updateOrganizationThirdPartyVPNPeers_updateOrganizationThirdPartyVpnPeers\" placeholder=\"msg.updateOrganizationThirdPartyVpnPeers\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-updateOrganizationThirdPartyVPNPeers_updateOrganizationThirdPartyVpnPeersType\" value=\"\" ></div>","example":"[\n  [\n    {\n      \"name\": \"My peer 1\",\n      \"publicIp\": \"123.123.123.1\",\n      \"privateSubnets\": [\n        \"192.168.1.0/24\",\n        \"192.168.128.0/24\"\n      ],\n      \"secret\": \"asdf1234\",\n      \"ipsecPolicies\": {\n        \"ikeCipherAlgo\": [\n          \"tripledes\"\n        ],\n        \"ikeAuthAlgo\": [\n          \"sha1\"\n        ],\n        \"ikeDiffieHellmanGroup\": [\n          \"group2\"\n        ],\n        \"ikeLifetime\": 28800,\n        \"childCipherAlgo\": [\n          \"aes128\"\n        ],\n        \"childAuthAlgo\": [\n          \"sha1\"\n        ],\n        \"childPfsGroup\": [\n          \"disabled\"\n        ],\n        \"childLifetime\": 28800\n      }\n    },\n    {\n      \"name\": \"My peer 2\",\n      \"publicIp\": \"123.123.123.2\",\n      \"remoteId\": \"miles@meraki.com\",\n      \"privateSubnets\": [\n        \"192.168.2.0/24\",\n        \"192.168.129.0/24\"\n      ],\n      \"secret\": \"asdf56785678567856785678\",\n      \"ipsecPoliciesPreset\": \"default\"\n    }\n  ]\n]","summary":"Update the third party VPN peers for an organization"},{"methodGroup":"Organizations","methodName":"getOrganizationUplinksLossAndLatency","parameters":[{"camelCaseName":"organizationId"},{"camelCaseName":"t0"},{"camelCaseName":"t1"},{"camelCaseName":"timespan"},{"camelCaseName":"uplink"},{"camelCaseName":"ip"}],"formHtml":"<h4>Parameters</h4><div class=\"form-row\" id=\"getOrganizationUplinksLossAndLatency_organizationId\"><label for=\"node-input-getOrganizationUplinksLossAndLatency_organizationId\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>organizationId<span style=\"color:red;\"> *</span></b> <i>&nbspstring</i></span></label><p></p><input type=\"text\" id=\"node-input-getOrganizationUplinksLossAndLatency_organizationId\" placeholder=\"msg.organizationId\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getOrganizationUplinksLossAndLatency_organizationIdType\" value=\"string\" ></div><div class=\"form-row\" id=\"getOrganizationUplinksLossAndLatency_t0\"><label for=\"node-input-getOrganizationUplinksLossAndLatency_t0\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>t0</b> <i>&nbspstring</i></span></label><p>The beginning of the timespan for the data. The maximum lookback period is 365 days from today.</p><input type=\"text\" id=\"node-input-getOrganizationUplinksLossAndLatency_t0\" placeholder=\"msg.t0\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getOrganizationUplinksLossAndLatency_t0Type\" value=\"string\" ></div><div class=\"form-row\" id=\"getOrganizationUplinksLossAndLatency_t1\"><label for=\"node-input-getOrganizationUplinksLossAndLatency_t1\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>t1</b> <i>&nbspstring</i></span></label><p>The end of the timespan for the data. t1 can be a maximum of 5 minutes after t0. The latest possible time that t1 can be is 2 minutes into the past.</p><input type=\"text\" id=\"node-input-getOrganizationUplinksLossAndLatency_t1\" placeholder=\"msg.t1\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getOrganizationUplinksLossAndLatency_t1Type\" value=\"string\" ></div><div class=\"form-row\" id=\"getOrganizationUplinksLossAndLatency_timespan\"><label for=\"node-input-getOrganizationUplinksLossAndLatency_timespan\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>timespan</b> <i>&nbspnumber</i></span></label><p>The timespan for which the information will be fetched. If specifying timespan, do not specify parameters t0 and t1. The value must be in seconds and be less than or equal to 5 minutes. The default is 5 minutes.</p><input type=\"text\" id=\"node-input-getOrganizationUplinksLossAndLatency_timespan\" placeholder=\"msg.timespan\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getOrganizationUplinksLossAndLatency_timespanType\" value=\"number\" ></div><div class=\"form-row\" id=\"getOrganizationUplinksLossAndLatency_uplink\"><label for=\"node-input-getOrganizationUplinksLossAndLatency_uplink\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>uplink</b> <i>&nbspstring</i></span></label><select id=\"node-input-getOrganizationUplinksLossAndLatency_uplink\"><option value=\"wan1\">wan1</option><option value=\"wan2\">wan2</option><option value=\"cellular\">cellular</option></select></div><div class=\"form-row\" id=\"getOrganizationUplinksLossAndLatency_ip\"><label for=\"node-input-getOrganizationUplinksLossAndLatency_ip\" style=\"width:70%\"><i class=\"fa fa-list\"></i> <span><b>ip</b> <i>&nbspstring</i></span></label><p>Optional filter for a specific destination IP. Default will return all destination IPs.</p><input type=\"text\" id=\"node-input-getOrganizationUplinksLossAndLatency_ip\" placeholder=\"msg.ip\" style=\"width:70%\"><input type=\"hidden\" id=\"node-input-getOrganizationUplinksLossAndLatency_ipType\" value=\"string\" ></div>","example":"[\n  [\n    {\n      \"networkId\": \"N_12345\",\n      \"serial\": \"Q2AB-CDEF-GHIJ\",\n      \"uplink\": \"wan1\",\n      \"ip\": \"8.8.8.8\",\n      \"timeSeries\": [\n        {\n          \"ts\": \"2019-01-31T18:46:13Z\",\n          \"lossPercent\": 5.3,\n          \"latencyMs\": 194.9\n        }\n      ]\n    }\n  ]\n]","summary":"Return the uplink loss and latency for every MX in the organization from at latest 2 minutes ago"}],"storedParams":[],"formHtml":"","method":"getOrganizations","x":530,"y":120,"wires":[["ae24a0f2.010aa"]]},{"id":"198a4d1b.6f47f3","type":"inject","z":"fa28c570.7a51b8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":260,"y":120,"wires":[["cf791133.9ccc3"]]},{"id":"ae24a0f2.010aa","type":"debug","z":"fa28c570.7a51b8","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","targetType":"msg","x":740,"y":80,"wires":[]},{"id":"c5fd978.d67ee68","type":"debug","z":"fa28c570.7a51b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":470,"y":320,"wires":[]},{"id":"137b8562.ede02b","type":"Webex Teams API","z":"fa28c570.7a51b8","profileConfig":"5bb77f5a.7394f","apiUrl":"http://localhost:1880/api/cisco_spark_v1.json","resource":"messages","method":"createMessage","name":"","x":460,"y":220,"wires":[["c5fd978.d67ee68"]]},{"id":"b7768150.ee2f2","type":"function","z":"fa28c570.7a51b8","name":"","func":"msg.payload= {\n    \n    body :\n    { toPersonEmail: 'vaibhav.k@proactive.co.in',\n    text: 'hello'\n    }\n};\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":340,"wires":[["137b8562.ede02b","c5fd978.d67ee68"]]},{"id":"31b7f4f.293720c","type":"inject","z":"fa28c570.7a51b8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":320,"wires":[["b7768150.ee2f2"]]},{"id":"dee51c10.b43f1","type":"debug","z":"89b2c70b.5de378","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":4430,"y":160,"wires":[]},{"id":"8f0aabd3.633088","type":"Webex Teams API","z":"89b2c70b.5de378","profileConfig":"5bb77f5a.7394f","apiUrl":"http://localhost:1880/api/cisco_spark_v1.json","resource":"messages","method":"createMessage","name":"","x":4200,"y":160,"wires":[["dee51c10.b43f1"]]},{"id":"68f04072.d6ce8","type":"function","z":"89b2c70b.5de378","name":"","func":"if (global.get(\"webex\")==1) {\n    msg.payload= {\n    body :\n    { toPersonEmail: \"vaibhav.k@proactive.co.in\",//flow.get(\"user\"),\n    text: 'You have rached your limit'\n    }\n};   \n}\nreturn msg;","outputs":1,"noerr":0,"x":3970,"y":160,"wires":[["8f0aabd3.633088"]]},{"id":"bfb73f59.b3cbf","type":"trigger","z":"89b2c70b.5de378","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"250","extend":false,"units":"ms","reset":"","bytopic":"all","name":"","x":3760,"y":380,"wires":[[]]},{"id":"48f843e8.8ae8ec","type":"switch","z":"89b2c70b.5de378","name":"webex","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":3810,"y":160,"wires":[["68f04072.d6ce8"]]},{"id":"3f47f905.506ec6","type":"function","z":"89b2c70b.5de378","name":"","func":"msg.payload = global.get(\"webex\");\nreturn msg;","outputs":1,"noerr":0,"x":3650,"y":160,"wires":[["48f843e8.8ae8ec"]]},{"id":"fbab4417.3c12f8","type":"function","z":"89b2c70b.5de378","name":"","func":"msg.topic = \"select * from students;\";\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":240,"wires":[["7e94b385.d3982c"]]},{"id":"4796bff0.0e303","type":"function","z":"89b2c70b.5de378","name":"filter","func":"data = msg.payload;\nlist = [];\nfor (i in data) {\n    list.push({mac : data[i].mac, email : data[i].email});\n}\nglobal.set(\"students\",list);\nmsg.payload = list;\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":240,"wires":[["91354393.ac19"]]},{"id":"7e94b385.d3982c","type":"mysql","z":"89b2c70b.5de378","mydb":"52258174.c9c2c","name":"db","x":470,"y":240,"wires":[["4796bff0.0e303"]]},{"id":"c3ba7da8.28c1","type":"debug","z":"89b2c70b.5de378","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"students","targetType":"msg","x":850,"y":280,"wires":[]},{"id":"a73c30a7.8bf55","type":"function","z":"db102253.019a2","name":"","func":"email = msg.payload.email;\nmac = msg.payload.mac;\nmsg.topic = \"select * from R_Courses where email='\"+email+\"';\";\nmsg.mac = mac;\nmsg.email = email;\nflow.set(\"student\", mac);\nreturn msg;","outputs":1,"noerr":0,"x":920,"y":1000,"wires":[["f0e3fd87.f9c37"]]},{"id":"f0e3fd87.f9c37","type":"mysql","z":"db102253.019a2","mydb":"52258174.c9c2c","name":"courses","x":1070,"y":1000,"wires":[["a3776f37.cba2b"]]},{"id":"a3776f37.cba2b","type":"function","z":"db102253.019a2","name":"","func":"msg.topic = \"select * from attendance where email='\"+msg.email+\"';\";\ndata = msg.payload;\ncourses = [];\nfor (i in data){\n    courses.push(data[i].course);\n}\nmsg.courses = courses;\nmsg.payload = courses;\nreturn msg;","outputs":1,"noerr":0,"x":1230,"y":1000,"wires":[["f63205ac.0f9de8","ee127ffc.af1a3"]]},{"id":"b4014622.d18e98","type":"function","z":"db102253.019a2","name":"","func":"msg.topic = \"select * from students;\";\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":1120,"wires":[["dd0f9e.92d2106"]]},{"id":"7a15f93a.ea4288","type":"function","z":"db102253.019a2","name":"filter","func":"data = msg.payload;\nlist = [];\nfor (i in data) {\n    list.push({mac : data[i].mac, email : data[i].email});\n}\nglobal.set(\"students\",list);\nmsg.payload = list;\nreturn msg;","outputs":1,"noerr":0,"x":650,"y":1120,"wires":[["8d9306d9.4d29b8"]]},{"id":"dd0f9e.92d2106","type":"mysql","z":"db102253.019a2","mydb":"52258174.c9c2c","name":"db","x":510,"y":1120,"wires":[["7a15f93a.ea4288"]]},{"id":"cc15cb34.523e98","type":"function","z":"db102253.019a2","name":"","func":"msg.topic = \"select ap from inventory;\";\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":1260,"wires":[["762e2392.b0b08c"]]},{"id":"b1332827.9300f8","type":"comment","z":"db102253.019a2","name":"Students List","info":"","x":130,"y":960,"wires":[]},{"id":"1ac56057.b5cfc","type":"comment","z":"db102253.019a2","name":"Location Table Data","info":"","x":190,"y":1180,"wires":[]},{"id":"1f33098e.64f926","type":"inject","z":"db102253.019a2","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"0 0-22 * * 1,2,3,4,5,6","once":false,"onceDelay":0.1,"x":110,"y":1260,"wires":[["cc15cb34.523e98"]]},{"id":"762e2392.b0b08c","type":"mysql","z":"db102253.019a2","mydb":"52258174.c9c2c","name":"db","x":460,"y":1260,"wires":[["143c26e5.0212a9","d7078b6f.216658"]]},{"id":"143c26e5.0212a9","type":"function","z":"db102253.019a2","name":"1","func":"data = msg.payload;\ncount =0;\nmsg.payload = data;\nfor (var i in data) {\n    count+=1;\n}\nmsg.data = data;\nmsg.ap =count;\nreturn msg;","outputs":1,"noerr":0,"x":590,"y":1240,"wires":[["e7b5ce82.48935"]]},{"id":"36be4542.fd87fa","type":"http request","z":"db102253.019a2","name":"","method":"GET","ret":"txt","paytoqs":false,"url":"","persist":false,"authType":"","x":950,"y":1260,"wires":[["fc98eea9.921b2"]]},{"id":"fc98eea9.921b2","type":"function","z":"db102253.019a2","name":"3","func":"data = JSON.parse(msg.payload);\nstudents = new Set();\nmsg.payload = data;\nmacList = [];\nfor (i in data) {\n    macList.push(data[i].mac);\n}\nmsg.macList = macList;\nreturn msg;","outputs":1,"noerr":0,"x":1120,"y":1260,"wires":[["34be772d.5efcd8","153c156e.59b0eb"]]},{"id":"34be772d.5efcd8","type":"switch","z":"db102253.019a2","name":"loop","property":"ap","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":530,"y":1420,"wires":[["6c54f564.db2b6c"]]},{"id":"6c54f564.db2b6c","type":"function","z":"db102253.019a2","name":"","func":"msg.ap=msg.ap-1;\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":1420,"wires":[["e7b5ce82.48935"]]},{"id":"e7b5ce82.48935","type":"function","z":"db102253.019a2","name":"2","func":"data = msg.data;\nmsg.headers = {\n    \"X-Cisco-Meraki-API-Key\": global.get(\"X-Cisco-Meraki-API-Key\")\n};\nmsg.method = 'get';\nmsg.url = global.get(\"baseURL\")+\"devices/\"+data[msg.ap-1].ap+\"/clients\";\nreturn msg;","outputs":1,"noerr":0,"x":730,"y":1260,"wires":[["36be4542.fd87fa"]]},{"id":"153c156e.59b0eb","type":"function","z":"db102253.019a2","name":"","func":"var date = new Date();\nstart_time = (date.getHours()-1)*60+date.getMinutes()+10;\nend_time = date.getHours()*60+date.getMinutes()-10;\n_date = Date().split(\":\")[0].slice(0,-2);\nap =0; \nvalues =\"\";\ndata = msg.data;\nmacList = msg.macList;\nfor (i in macList) {\n    values+=\"insert into Location values ('\"+macList[i]+\"', '\"+data[msg.ap-1].ap+\"', '\"+_date+\"', \"+start_time+\", \"+end_time+\"); \";\n}\nmsg.topic = values;\nreturn msg;","outputs":1,"noerr":0,"x":1270,"y":1260,"wires":[["4c518945.14ee68","f87926a1.4648a8"]]},{"id":"f87926a1.4648a8","type":"debug","z":"db102253.019a2","name":"log3","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1450,"y":1460,"wires":[]},{"id":"cea42d61.e3ca5","type":"function","z":"db102253.019a2","name":"","func":"\nreturn msg;","outputs":1,"noerr":0,"x":1040,"y":1400,"wires":[[]]},{"id":"4c518945.14ee68","type":"mysql","z":"db102253.019a2","mydb":"52258174.c9c2c","name":"Location db","x":1430,"y":1260,"wires":[["f87926a1.4648a8"]]},{"id":"ee127ffc.af1a3","type":"mysql","z":"db102253.019a2","mydb":"52258174.c9c2c","name":"attendance","x":1410,"y":1000,"wires":[["3fbb630e.63a18c","e84f0a89.7bb6a8"]]},{"id":"d51032f3.592c","type":"function","z":"db102253.019a2","name":"","func":"data = msg.payload;\ncourses = [];\nmsg.topic =\"\";\nfor (i in data) {\n    msg.topic += \" select * from Location where mac='\"+msg.mac+\"' and ap='\"+data[i].access_point+\"' and start_t>\"+data[i].start_time+\"; \";\n}\n// email = data[0].email;\nflow.set(\"courses\",courses);\nmsg.timetable = data;\nreturn msg;","outputs":1,"noerr":0,"x":1790,"y":580,"wires":[["55753161.88a33"]]},{"id":"55753161.88a33","type":"mysql","z":"db102253.019a2","mydb":"52258174.c9c2c","name":"Location","x":1940,"y":580,"wires":[[]]},{"id":"3fbb630e.63a18c","type":"function","z":"db102253.019a2","name":"","func":"\ndata = msg.payload;\ncount =0;\nclient =[]\ntimetable = msg.timetable;\ncourses = msg.courses;\nobj={};\ncourses2 = [];\nfor (i in data) {\n   obj[data[i]['Date']]={};\n   for (j in courses) {\n       obj[data[i]['Date']][courses[j]]=0;\n       courses2.push(courses[j]);\n   }\n}\n\nfor (i in data) {\n//   obj[data[i]['Date']]={};\n   obj[data[i]['Date']][data[i]['course']]=data[i]['attend'];\n}\n\njson = {};\ntest = [];\n// oldDate = new Date();\n// json[\"Date\"]=oldDate.getDate()+'/'+(oldDate.getMonth()+1)+'/'+oldDate.getFullYear();\n// for (i in client){\n//     json[client[i].course] = client[i].attendance;\n// }\n\ntableData = [];\nfor(i in obj){\n    json = {};\n    // tableData.push(i);\n    json[\"Date\"]=i;\n    for(j in obj[i]){\n        json[j]=obj[i][j];//obj[obj[i]][obj[j]]\n    }\n    tableData.push(json);\n}\n\n// for(i in json)\n//     tableData.push(i);\n\n// msg.client = client;\nmsg.payload = tableData;//JSON.parse(json);\nreturn msg;","outputs":1,"noerr":0,"x":1670,"y":1000,"wires":[["5efdab73.8c4b34","b70cf589.3b0e78"]]},{"id":"b70cf589.3b0e78","type":"debug","z":"db102253.019a2","name":"log4","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1870,"y":740,"wires":[]},{"id":"e86d5ea4.7d158","type":"comment","z":"db102253.019a2","name":"store attendance in table","info":"","x":130,"y":1480,"wires":[]},{"id":"cf799a4a.c1cbf8","type":"inject","z":"db102253.019a2","name":"attendance markup","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"00 18 * * 1,2,3,4,5,6","once":false,"onceDelay":0.1,"x":140,"y":1540,"wires":[["b427bf1d.a305d"]]},{"id":"61018e57.edf6","type":"function","z":"db102253.019a2","name":"Students list","func":"list = global.get( \"students\");\ncount= msg.count;\nemail = list[count-1].email;\nmac= list[count-1].mac;\nmsg.email = email;\nmsg.mac= mac;\nmsg.payload = email;\nmsg.count = count-1;\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":1560,"wires":[["683fe009.b4483","297c3fe9.9d6cf"]]},{"id":"297c3fe9.9d6cf","type":"switch","z":"db102253.019a2","name":"","property":"count","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":450,"y":1680,"wires":[["61018e57.edf6"]]},{"id":"d7078b6f.216658","type":"debug","z":"db102253.019a2","name":"test","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload[0].ap","targetType":"msg","x":300,"y":1400,"wires":[]},{"id":"b427bf1d.a305d","type":"function","z":"db102253.019a2","name":"Student Count","func":"list = global.get( \"students\");\ncount= list.length;\nmsg.count = count;\nreturn msg;","outputs":1,"noerr":0,"x":220,"y":1620,"wires":[["61018e57.edf6"]]},{"id":"683fe009.b4483","type":"function","z":"db102253.019a2","name":"pick courses","func":"email = msg.payload;\nmsg.topic = \"select * from R_Courses where email='\"+email+\"';\";\nreturn msg;","outputs":1,"noerr":0,"x":650,"y":1560,"wires":[["b7f83b81.90d1d8"]]},{"id":"b7f83b81.90d1d8","type":"mysql","z":"db102253.019a2","mydb":"52258174.c9c2c","name":"courses","x":800,"y":1560,"wires":[["86f4b00a.754d3"]]},{"id":"d00d32c8.7d518","type":"debug","z":"db102253.019a2","name":"ttttttttttt","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1350,"y":1780,"wires":[]},{"id":"86f4b00a.754d3","type":"function","z":"db102253.019a2","name":"pick timetable","func":"msg.topic = \"select * from TimeTable;\";\ndata = msg.payload;\ncourses = [];\nfor (i in data){\n    courses.push(data[i].course);\n}\nmsg.payload = courses;\nreturn msg;","outputs":1,"noerr":0,"x":640,"y":1640,"wires":[["f53b0342.304c3"]]},{"id":"f53b0342.304c3","type":"mysql","z":"db102253.019a2","mydb":"52258174.c9c2c","name":"timetable","x":700,"y":1740,"wires":[["91f26dc4.e9dc3"]]},{"id":"91f26dc4.e9dc3","type":"function","z":"db102253.019a2","name":"check attendance in location table","func":"tt_data = msg.payload;\ncourses = [];\nmsg.topic =\"\";\ndate = Date().split(\":\")[0].slice(0,-2);\nfor (var i in tt_data) {\n    msg.topic += \" select * from Location where mac='\"+msg.mac+\"' and ap='\"+tt_data[i].access_point+\"' and start_t>=\"+ tt_data[i].start_time+\" and date='\"+date+\"' and end_t<=\"+tt_data[i].end_time+\"; \";\n}\n// email = data[0].email;\nflow.set(\"courses\",courses);\nmsg.timetable = tt_data;\nreturn msg;","outputs":1,"noerr":0,"x":940,"y":1640,"wires":[["6e0b8416.17a61c","1885769.25be089"]]},{"id":"6e0b8416.17a61c","type":"mysql","z":"db102253.019a2","mydb":"52258174.c9c2c","name":"Location","x":1120,"y":1740,"wires":[["b01ad4a0.166a78"]]},{"id":"b01ad4a0.166a78","type":"function","z":"db102253.019a2","name":"insert into attendance table","func":"data = msg.payload;\ncount =0;\nclient =[]\ntimetable = msg.timetable;\nfor (i in data) {\n    if(data[i].length!=0){\n       obj = data[i];\n       for (j in timetable){\n          if(timetable[j].access_point==obj[0].ap){\n               client.push({course: timetable[j].course, attendance : 1});\n          }\n       }\n    }\n}\n\nchk =0 ;\nfor (j in timetable){\n    chk = 0;\n    for (i in client){\n          if(timetable[j].course==client[i].course){\n              chk = 1;\n          }\n    }\n    if(chk===0)\n        client.push({course: timetable[j].course, attendance : 0});  \n}\njson = {};\noldDate = new Date();\nvar d =oldDate.getDate()+'/'+(oldDate.getMonth()+1)+'/'+oldDate.getFullYear();\nemail = msg.email;\nqr = \"\";\nlen= client.length;\ncnt= 0;\nfor (i in client){\n    \n   qr += \"Insert into attendance ( email, Date, course, attend ) values ('\"+ msg.email +\"', '\"+ d +\"', '\"+ client[i].course+\"', '\"+ client[i].attendance+\"');\" ;\n}\n\n\n// for (j in client){\n//     att =client[j].attendance;\n// }\n\nmsg.client = client;\nmsg.payload = qr;\nmsg.topic = qr;\nreturn msg;","outputs":1,"noerr":0,"x":1300,"y":1640,"wires":[["46245c2d.5be464"]]},{"id":"46245c2d.5be464","type":"mysql","z":"db102253.019a2","mydb":"52258174.c9c2c","name":"attendance","x":1430,"y":1700,"wires":[["d00d32c8.7d518"]]},{"id":"fdf8cbd8.efdcf8","type":"function","z":"db102253.019a2","name":"","func":"data = msg.payload;\ncount =0;\nclient =[]\ntimetable = msg.timetable;\nfor (i in data) {\n    if(data[i].length!=0){\n       obj = data[i];\n       for (j in timetable){\n          if(timetable[j].access_point==obj[0].ap){\n               client.push({course: timetable[j].course, attendance : 1});\n          }\n       }\n    }\n}\n\nchk =0 ;\nfor (j in timetable){\n    chk = 0;\n    for (i in client){\n          if(timetable[j].course==client[i].course){\n              chk = 1;\n          }\n    }\n    if(chk===0)\n        client.push({course: timetable[j].course, attendance : 0});  \n}\njson = {};\noldDate = new Date();\njson[\"Date\"]=oldDate.getDate()+'/'+(oldDate.getMonth()+1)+'/'+oldDate.getFullYear();\nfor (i in client){\n    json[client[i].course] = client[i].attendance;\n}\n\ntableData = [];\nfor( i=0;i<10;i++)\n    tableData.push(json);\n\nmsg.client = client;\nmsg.payload = tableData;\nreturn msg;","outputs":1,"noerr":0,"x":1200,"y":680,"wires":[[]]},{"id":"1885769.25be089","type":"debug","z":"db102253.019a2","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"topic","targetType":"msg","x":1110,"y":1560,"wires":[]},{"id":"609976d2.444248","type":"ui_button","z":"9b95398.c813ec8","name":"","group":"825399e9.cf2928","order":0,"width":0,"height":0,"passthru":false,"label":"Unlock_door","tooltip":"","color":"","bgcolor":"","icon":"lock","payload":"true","payloadType":"bool","topic":"show","x":230,"y":340,"wires":[["fb89f03.ecb701"]]},{"id":"895f47c1.754cc8","type":"function","z":"9b95398.c813ec8","name":"verify_pin","func":"var pins = [\"2136\"];\nvar verified = false;\n\nfor(var i=0;i<pins.length;i++){\n    if(msg.passcode == pins[i]){\n        verified = true;\n        break;\n    }\n}\n\nmsg.verified = verified;\n\nreturn msg;","outputs":1,"noerr":0,"x":580,"y":340,"wires":[["8fac62cd.44a1d"]]},{"id":"8fac62cd.44a1d","type":"switch","z":"9b95398.c813ec8","name":"check","property":"verified","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"false","outputs":2,"x":730,"y":340,"wires":[["d0d4a83a.647068"],["5e124799.eb3e38"]]},{"id":"42620e89.dfefa","type":"ui_toast","z":"9b95398.c813ec8","position":"top right","displayTime":"3","outputs":0,"ok":"OK","cancel":"","topic":"","name":"","x":1114,"y":333,"wires":[]},{"id":"d0d4a83a.647068","type":"function","z":"9b95398.c813ec8","name":"pin_ok","func":"var msg2 = {};\nmsg2.topic = \"Pin successfully verified!\";\nmsg2.payload = \"\";\n    \nreturn [msg, msg2];","outputs":"2","noerr":0,"x":895.8749961853027,"y":319.9999942779541,"wires":[["eb556f76.13e9"],["42620e89.dfefa"]]},{"id":"5e124799.eb3e38","type":"function","z":"9b95398.c813ec8","name":"pin_error","func":" msg.topic = \"Wrong PIN\";\n msg.payload = \"\";\n    \nreturn msg;","outputs":1,"noerr":0,"x":905.8749961853027,"y":359.9999942779541,"wires":[["42620e89.dfefa"]]},{"id":"fb89f03.ecb701","type":"ui_template","z":"9b95398.c813ec8","group":"c3a3989c.d7fa68","name":"Pin_Unlock","order":0,"width":"0","height":"0","format":"<div ng-init=\"init()\" id=\"pin_insert\" class=\"dialog\">\n    \n    <div class=\"dialog_content\">\n        \n        <div class=\"dialog_header\">\n            <span ng-click=\"closeDialog()\" class=\"close\">&times;</span>\n            <h2 style=\"margin:10px\">Insert PIN</h2>\n        </div>\n        \n        <div class=\"dialog_body\">\n\n           <div layout=\"row\" layout-align=\"center\">\n                <div class=\"number_placeholder\">\n                    {{passcode.substring(0, 1)}}\n                </div>\n                <div class=\"number_placeholder\">\n                    {{passcode.substring(1, 2)}}\n                </div>\n                <div class=\"number_placeholder\">\n                    {{passcode.substring(2, 3)}}\n                </div>\n                <div class=\"number_placeholder\">\n                    {{passcode.substring(3, 4)}}\n                </div>\n            </div>\n            \n            <div layout=\"column\" layout-align=\"center\" style=\"margin-top: 10px\">\n                <div layout=\"row\" layout-align=\"center\">\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(1)\">1</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(2)\">2</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(3)\">3</md-button>\n                    </div>\n                </div>\n                 <div layout=\"row\" layout-align=\"center\">\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(4)\">4</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(5)\">5</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(6)\">6</md-button>\n                    </div>\n                </div>\n                 <div layout=\"row\" layout-align=\"center\">\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(7)\">7</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(8)\">8</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(9)\">9</md-button>\n                    </div>\n                </div>\n                 <div layout=\"row\" layout-align=\"center\">\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"confirm()\">\n                            <ng-md-icon icon=\"done\" style=\"color:#fff;\"></ng-md-icon>\n                        </md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(0)\">0</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"delete()\">\n                            <ng-md-icon icon=\"arrow_back\" style=\"color:#fff;\"></ng-md-icon>\n                        </md-button>\n                    </div>\n                </div>\n            </div> \n          \n        </div> <!--dialog_body-->\n    </div> <!--dialog_content-->\n</div>  <!--dialog-->\n\n\n<style>\n\n/* The Dialog (background) */\n.dialog {\n    display: none; /* Hidden by default */\n    position: fixed; /* Stay in place */\n    z-index: 9999; /* Sit on top */\n    left: 0;\n    top: 0;\n    width: 100%; /* Full width */\n    height: 100%; /* Full height */\n    overflow: auto; /* Enable scroll if needed */\n    background-color: rgb(0,0,0); /* Fallback color */\n    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */\n    -webkit-transform: translateZ(0px);\n    -webkit-transform: translate3d(0,0,0);\n    -webkit-perspective: 1000;\n}\n\n.dialog_content {\n    position: absolute;\n    background-color: #fff;\n    left: calc(50% - 170px);\n    top: 30px;\n    border-radius: 10px;\n    padding: 0;\n    width: 340px;\n    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\n    -webkit-animation-name: animatetop;\n    animation-name: animatetop;\n    animation-duration: 0.4s;\n}\n\n/* Media query for smartphones (to Fix?) */\n@media only screen and (min-device-width : 375px) and (max-device-width : 667px) { \n    .dialog_content {\n    margin-top: 5%;\n    margin-left: 5%;\n}\n}\n\n/* Add Animation */\n@-webkit-keyframes animatetop {\n    from {top: -300px; opacity: 0} \n    to {top: 0; opacity: 1}\n}\n\n@keyframes animatetop {\n    from {top: -300px; opacity: 0}\n    to {top: 0; opacity: 1}\n}\n\n/* Dialog Header */\n.dialog_header {\n    padding: 2px 16px;\n    background-color: #03A9F4;\n    border-radius: 10px 10px 0 0;\n    color: white;\n}\n\n/* Dialog Body */\n.dialog_body {padding: 5px;}\n\n/* The Close Button */\n.close {\n    color: #fff;\n    float: right;\n    font-size: 28px;\n    font-weight: bold;\n    cursor: pointer;\n}\n\n.close:hover,\n.close:focus {\n    color: #1565C0;\n    text-decoration: none;\n    cursor: pointer;\n}\n\n/* __ */\n.number_placeholder{\n    width: 50px;\n    height: 34px;\n    margin: 10px;\n    font-size: 20pt;\n    text-align: center;\n    border-bottom: 1px solid black;\n}\n\n/* Number container */\n.number_box{\n    margin: 5px;\n}\n\n/* Buttons style */\n.pin {\n    min-height: 50px;\n    min-width: 50px;\n    font-weight: bold;\n    margin: 0px 10px 10px 0px;\n    box-shadow: 4px 4px 6px 0 #dadada;\n    background-color: #29B6F6;\n    color: #fff;\n}\n\n.pin:not([disabled]):hover {\n    background-color: #03A9F4;\n}\n\n.btn1 {\n  color : rgb(49, 46, 46);\n  background-color: rgba(255, 222, 121, 0.96);\n  border-radius: 10px 0 0 10px;\n  font-size: 16px;\n}\n\n.btn1:not([disabled]):hover {\n  background-color: rgba(107, 103, 91, 0.96);\n  color: white;\n}\n\n.btn1[disabled] {\n  color : rgb(187, 187, 187);\n  background-color: rgba(230, 230, 229, 0.96);\n}\n\n</style>\n\n<script>\n\n/**\n * pin_dialog.js\n * Node-Red UI template for Node-Red Dashboard. \n * Custom dialog that asks for a PIN to allow actions\n * Enjoy it :). \n * -- Daniel\n *\n *\n * @license The Unlicense, http://unlicense.org/\n * @version 0.2\n * @author  Daniel Lando, https://github.com/robertsLando\n * @updated 2019-03-18\n * @link    ----\n *\n *\n */\n\nvar dialog;\n\n/* ==== */\n(function(scope) {\n    \n    scope.passcode = \"\";\n    scope.payload = \"\";\n    scope.inited = false;\n    \n    scope.init = function() {\n        scope.passcode = \"\";\n        //Hide the md-panel\n        $('#pin_insert').parent().parent().css(\"display\", \"none\");\n        //This trick make it works on smartphones too :)\n        dialog = $('#pin_insert').detach();\n        //dialog.appendTo(document.body); // This leaves ghost numpads if pinpad is not opened!\n    }\n    \n    scope.showDialog = function() {\n        dialog.appendTo(document.body); // better to add the body only when the numpad is displayed (seams to be removed automatically)\n        dialog.css(\"display\", \"block\");\n    }\n    \n    scope.closeDialog = function(){\n        dialog.css(\"display\", \"none\");\n    }\n    \n    scope.add = function(value) {\n        if(scope.passcode.length < 4) {\n            scope.passcode = scope.passcode + value;\n            if(scope.passcode.length == 4) {\n                console.log(\"The four digit code was entered\");\n                   \n            }\n        }\n    }\n \n    scope.delete = function() {\n        if(scope.passcode.length > 0) {\n            scope.passcode = scope.passcode.substring(0, scope.passcode.length - 1);\n        }\n    }\n    \n    scope.confirm = function() {\n        if(scope.passcode.length == 4) {\n            scope.send({passcode: scope.passcode, payload : scope.payload});\n            scope.closeDialog();\n            scope.passcode = \"\";\n            scope.payload = \"\";\n        }\n    }\n\n    scope.$watch('msg', function(data) {\n        if(data && data.topic){\n            switch(data.topic){\n               case \"show\":\n                   if(scope.inited){\n                        scope.payload = data.payload;\n                        scope.showDialog();\n                   }\n                   else\n                        scope.inited = true;\n                break;\n                case \"close\": \n                    scope.closeDialog(); \n                break;\n            }\n        }\n    });\n})(scope);\n\n</script>\n","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":415.3750343322754,"y":339.9642696380615,"wires":[["895f47c1.754cc8"]]},{"id":"eb556f76.13e9","type":"debug","z":"9b95398.c813ec8","name":"do_Something","active":true,"console":"false","complete":"payload","x":1105.8749961853027,"y":279.9999942779541,"wires":[]},{"id":"7811fb6d.ae4114","type":"ui_chart","z":"aae03965.769f28","name":"","group":"715a4744.7304d8","order":1,"width":"6","height":"6","label":"Nhiệt Độ","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"9999","removeOlderPoints":"500","removeOlderUnit":"604800","cutout":0,"useOneColor":false,"colors":["#1f77b4","#ff8040","#008080","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":600,"y":100,"wires":[[]]},{"id":"e709ca41.9a3668","type":"function","z":"aae03965.769f28","name":"all","func":"\nmsg.payload= [{\n\"series\": [\"Temp\", \"Hum\"],\n\"data\": [\n    [{ \"x\": 1559481514470, \"y\":30 },{ \"x\": 1559481524470, \"y\":20 },{ \"x\": 1559481534470, \"y\":40 }],\n    [{ \"x\": 1559481514470, \"y\":10 },{ \"x\": 1559481524470, \"y\":30 },{ \"x\": 1559481534470, \"y\":50 }]\n],\n\"labels\": [\"X\", \"Y\"]\n}]\nreturn msg;\n","outputs":1,"noerr":0,"x":370,"y":140,"wires":[["7811fb6d.ae4114","97cd6812.125fa8"]]},{"id":"97cd6812.125fa8","type":"debug","z":"aae03965.769f28","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":590,"y":140,"wires":[]},{"id":"43a2c467.891a1c","type":"inject","z":"aae03965.769f28","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":140,"wires":[["e709ca41.9a3668"]]},{"id":"456cafad.d35a5","type":"mysql","z":"db102253.019a2","mydb":"52258174.c9c2c","name":"dwell","x":770,"y":780,"wires":[["a2dc4b14.983858","4af192f4.14b93c"]]},{"id":"6dad7a97.b98054","type":"function","z":"db102253.019a2","name":"","func":"date = new Date();\nd =date.getDate()+'/'+(date.getMonth()+1)+'/'+date.getFullYear();\nmac = msg.payload.mac;\nmsg.topic = \"select * from DWELL where mac='\"+mac+\"' and date ='\"+d+\"' ;\";\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":780,"wires":[["456cafad.d35a5"]]},{"id":"a2dc4b14.983858","type":"function","z":"db102253.019a2","name":"","func":"data = msg.payload;\nap = [];\ntime = [];\nfor (i in data) {\n    ap.push(data[i][\"ap\"]);\n    time.push(data[i][\"time\"]);\n}\n// msg.payload =   [\n//         {\n//             \"series\": [ {X: \"AP\", Y: \"MAC\"} ],\n//             \"data\": [\n//               { X: [1,2,3,4,5,6],\n//                 Y: [1,2,3,4,5,6]}\n//             ],\n//             \"labels\": [ {X: \"AP\", Y: \"MAC\"} ]\n//         }\n//     ];\n    \nmsg.payload = [{\n\"series\": [\"\"],\n\"data\": [\n    time\n    // [{ \"x\": 1559481514470, \"y\":10 },{ \"x\": 1559481524470, \"y\":30 },{ \"x\": 1559481534470, \"y\":50 }]\n],\n\"labels\": ap\n}];\nreturn msg;","outputs":1,"noerr":0,"x":920,"y":780,"wires":[["4952470c.fccfe8"]]},{"id":"4952470c.fccfe8","type":"ui_chart","z":"db102253.019a2","name":"","group":"1af318c6.b10257","order":3,"width":0,"height":0,"label":"","chartType":"horizontalBar","legend":"true","xformat":"auto","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"3","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1070,"y":780,"wires":[["7a0c1923.8ab5b8"]]},{"id":"7a0c1923.8ab5b8","type":"debug","z":"db102253.019a2","name":"Dwell Chart","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1270,"y":780,"wires":[]},{"id":"4af192f4.14b93c","type":"debug","z":"db102253.019a2","name":"dwell data","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":850,"y":880,"wires":[]},{"id":"5b9862f9.097e5c","type":"ui_template","z":"db102253.019a2","group":"1af318c6.b10257","name":"Header Attend Table","order":2,"width":0,"height":0,"format":"<div>\n    <h3 style=\"color:#00ccff; padding-left:20px;\">Dwell Time</h3>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":880,"y":540,"wires":[[]]},{"id":"e84f0a89.7bb6a8","type":"debug","z":"db102253.019a2","name":"log10","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1760,"y":1100,"wires":[]}]